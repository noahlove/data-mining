<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 PCA on weather data example | Data Mining</title>
  <meta name="description" content="Chapter 5 PCA on weather data example | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 PCA on weather data example | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 PCA on weather data example | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="principal-component-analysis-applied.html"/>
<link rel="next" href="tidyverse-tools.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>2</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>3</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>3.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>3.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="3.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>3.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>4.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>4.1.1</b> Other example</a></li>
<li class="chapter" data-level="4.1.2" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#fishing-out-various-titles"><i class="fa fa-check"></i><b>4.1.2</b> Fishing out various titles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html"><i class="fa fa-check"></i><b>5</b> PCA on weather data example</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#different-noramlizations"><i class="fa fa-check"></i><b>5.1</b> Different noramlizations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#no-normalization"><i class="fa fa-check"></i><b>5.1.1</b> No normalization</a></li>
<li class="chapter" data-level="5.1.2" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.1.2</b> Centering and scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html"><i class="fa fa-check"></i><b>6</b> Tidyverse tools</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#select"><i class="fa fa-check"></i><b>6.1</b> Select</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#original-data-set"><i class="fa fa-check"></i><b>6.1.1</b> Original Data Set</a></li>
<li class="chapter" data-level="6.1.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#other-select-functions"><i class="fa fa-check"></i><b>6.1.2</b> Other select functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#filter"><i class="fa fa-check"></i><b>6.2</b> Filter</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#logical-tests-in-r"><i class="fa fa-check"></i><b>6.2.1</b> Logical Tests in R</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#mutate"><i class="fa fa-check"></i><b>6.3</b> Mutate</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-mutate-functions"><i class="fa fa-check"></i><b>6.3.1</b> Useful mutate functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#summarise-summarize"><i class="fa fa-check"></i><b>6.4</b> Summarise / Summarize</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-summary-functions"><i class="fa fa-check"></i><b>6.4.1</b> Useful summary functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pca-on-weather-data-example" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> PCA on weather data example</h1>
<ul>
<li>Wrap up the citation problem</li>
<li>Play with weather data, tmax, celsius</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="pca-on-weather-data-example.html#cb77-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/ushcn.csv&quot;</span>)</span>
<span id="cb77-2"><a href="pca-on-weather-data-example.html#cb77-2" aria-hidden="true" tabindex="-1"></a>station <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/station_metadata.csv&quot;</span>)</span>
<span id="cb77-3"><a href="pca-on-weather-data-example.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(station) <span class="ot">&lt;-</span> station<span class="sc">$</span>id</span>
<span id="cb77-4"><a href="pca-on-weather-data-example.html#cb77-4" aria-hidden="true" tabindex="-1"></a>meta_sort <span class="ot">&lt;-</span> station[<span class="fu">names</span>(df)[<span class="sc">-</span><span class="dv">1</span>], <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>)]</span>
<span id="cb77-5"><a href="pca-on-weather-data-example.html#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="pca-on-weather-data-example.html#cb77-6" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb77-7"><a href="pca-on-weather-data-example.html#cb77-7" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb77-8"><a href="pca-on-weather-data-example.html#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="pca-on-weather-data-example.html#cb77-9" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb77-10"><a href="pca-on-weather-data-example.html#cb77-10" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb77-11"><a href="pca-on-weather-data-example.html#cb77-11" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb77-12"><a href="pca-on-weather-data-example.html#cb77-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb77-13"><a href="pca-on-weather-data-example.html#cb77-13" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb77-14"><a href="pca-on-weather-data-example.html#cb77-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-15"><a href="pca-on-weather-data-example.html#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb77-16"><a href="pca-on-weather-data-example.html#cb77-16" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;RdYlBu&quot;</span>)</span>
<span id="cb77-17"><a href="pca-on-weather-data-example.html#cb77-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-18"><a href="pca-on-weather-data-example.html#cb77-18" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na)</span>
<span id="cb77-19"><a href="pca-on-weather-data-example.html#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/no_norm_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb77-20"><a href="pca-on-weather-data-example.html#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb77-21"><a href="pca-on-weather-data-example.html#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb77-22"><a href="pca-on-weather-data-example.html#cb77-22" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb77-23"><a href="pca-on-weather-data-example.html#cb77-23" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb77-24"><a href="pca-on-weather-data-example.html#cb77-24" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb77-25"><a href="pca-on-weather-data-example.html#cb77-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb77-26"><a href="pca-on-weather-data-example.html#cb77-26" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb77-27"><a href="pca-on-weather-data-example.html#cb77-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb77-28"><a href="pca-on-weather-data-example.html#cb77-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb77-29"><a href="pca-on-weather-data-example.html#cb77-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb77-30"><a href="pca-on-weather-data-example.html#cb77-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb77-31"><a href="pca-on-weather-data-example.html#cb77-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb77-32"><a href="pca-on-weather-data-example.html#cb77-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-33"><a href="pca-on-weather-data-example.html#cb77-33" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<div class="figure">
<img src="Pictures/no_norm_pca.png" alt="" />
<p class="caption">Eigenvector 1 and two mapped</p>
</div>
<p>The two are telling in very different ways. The first shows the relationships of the coasts. The second shows east versus west. This is with default normalization: centering, but not scaling.</p>
<div id="different-noramlizations" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Different noramlizations</h2>
<p>Run PCA with 3 different types of normalization on the maximum temperature data, then plot the “maps” of the loading values corresponding to the first 2 eigenvectors.</p>
<ul>
<li>No normalization, i.e. no centering and no scaling</li>
<li>Centering but no scaling</li>
<li>Centering and scaling</li>
</ul>
<p>Write out what do you observe.</p>
<div id="no-normalization" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> No normalization</h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="pca-on-weather-data-example.html#cb79-1" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb79-2"><a href="pca-on-weather-data-example.html#cb79-2" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb79-3"><a href="pca-on-weather-data-example.html#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="pca-on-weather-data-example.html#cb79-4" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb79-5"><a href="pca-on-weather-data-example.html#cb79-5" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb79-6"><a href="pca-on-weather-data-example.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb79-7"><a href="pca-on-weather-data-example.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb79-8"><a href="pca-on-weather-data-example.html#cb79-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb79-9"><a href="pca-on-weather-data-example.html#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="pca-on-weather-data-example.html#cb79-10" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;RdYlBu&quot;</span>)</span>
<span id="cb79-11"><a href="pca-on-weather-data-example.html#cb79-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-12"><a href="pca-on-weather-data-example.html#cb79-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na, <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">center =</span> <span class="cn">FALSE</span>)</span>
<span id="cb79-13"><a href="pca-on-weather-data-example.html#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/no_standardization_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb79-14"><a href="pca-on-weather-data-example.html#cb79-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb79-15"><a href="pca-on-weather-data-example.html#cb79-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb79-16"><a href="pca-on-weather-data-example.html#cb79-16" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb79-17"><a href="pca-on-weather-data-example.html#cb79-17" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb79-18"><a href="pca-on-weather-data-example.html#cb79-18" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb79-19"><a href="pca-on-weather-data-example.html#cb79-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb79-20"><a href="pca-on-weather-data-example.html#cb79-20" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb79-21"><a href="pca-on-weather-data-example.html#cb79-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb79-22"><a href="pca-on-weather-data-example.html#cb79-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb79-23"><a href="pca-on-weather-data-example.html#cb79-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb79-24"><a href="pca-on-weather-data-example.html#cb79-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb79-25"><a href="pca-on-weather-data-example.html#cb79-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb79-26"><a href="pca-on-weather-data-example.html#cb79-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb79-27"><a href="pca-on-weather-data-example.html#cb79-27" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
</div>
<div id="centering-and-scaling" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Centering and scaling</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="pca-on-weather-data-example.html#cb81-1" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb81-2"><a href="pca-on-weather-data-example.html#cb81-2" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb81-3"><a href="pca-on-weather-data-example.html#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="pca-on-weather-data-example.html#cb81-4" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb81-5"><a href="pca-on-weather-data-example.html#cb81-5" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb81-6"><a href="pca-on-weather-data-example.html#cb81-6" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb81-7"><a href="pca-on-weather-data-example.html#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb81-8"><a href="pca-on-weather-data-example.html#cb81-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb81-9"><a href="pca-on-weather-data-example.html#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="pca-on-weather-data-example.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb81-11"><a href="pca-on-weather-data-example.html#cb81-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-12"><a href="pca-on-weather-data-example.html#cb81-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-13"><a href="pca-on-weather-data-example.html#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/centering_and_scaling_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb81-14"><a href="pca-on-weather-data-example.html#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb81-15"><a href="pca-on-weather-data-example.html#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb81-16"><a href="pca-on-weather-data-example.html#cb81-16" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb81-17"><a href="pca-on-weather-data-example.html#cb81-17" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb81-18"><a href="pca-on-weather-data-example.html#cb81-18" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb81-19"><a href="pca-on-weather-data-example.html#cb81-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb81-20"><a href="pca-on-weather-data-example.html#cb81-20" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb81-21"><a href="pca-on-weather-data-example.html#cb81-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb81-22"><a href="pca-on-weather-data-example.html#cb81-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb81-23"><a href="pca-on-weather-data-example.html#cb81-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb81-24"><a href="pca-on-weather-data-example.html#cb81-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb81-25"><a href="pca-on-weather-data-example.html#cb81-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb81-26"><a href="pca-on-weather-data-example.html#cb81-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb81-27"><a href="pca-on-weather-data-example.html#cb81-27" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<p>Scaling is super common. When you have different units you always usually scale. However, sometimes, with things like weather data, you might not have to. PCA is trying to find a very consice, uncorrelated description of your data. If things are close to 0, they won’t effect.</p>
<p>Subset out the last 144 rows for testing, then pick one station to be our Y and the other stations to be our X.</p>
<ul>
<li>Run PCA on the X values, then fit an OLS</li>
<li>Run OLS but only use the closest station (don’t bother with projecting, assuming Long/Lat are equidistance for now) as your X.</li>
</ul>
<p>Which one will do best?</p>
<p>(if you have time, try Lasso with all of the data, this may take awhile….don’t do this unless you have time)</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="pca-on-weather-data-example.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Takes last 144 for testing</span></span>
<span id="cb83-2"><a href="pca-on-weather-data-example.html#cb83-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(sdf_sans_na) <span class="sc">-</span> <span class="dv">144</span>)</span>
<span id="cb83-3"><a href="pca-on-weather-data-example.html#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="pca-on-weather-data-example.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Samples and individual X to be the Y point</span></span>
<span id="cb83-5"><a href="pca-on-weather-data-example.html#cb83-5" aria-hidden="true" tabindex="-1"></a>y_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">ncol</span>(sdf_sans_na), <span class="dv">1</span>)</span>
<span id="cb83-6"><a href="pca-on-weather-data-example.html#cb83-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-7"><a href="pca-on-weather-data-example.html#cb83-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-8"><a href="pca-on-weather-data-example.html#cb83-8" aria-hidden="true" tabindex="-1"></a>y_train <span class="ot">&lt;-</span> sdf_sans_na[train, y_ind]</span>
<span id="cb83-9"><a href="pca-on-weather-data-example.html#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="pca-on-weather-data-example.html#cb83-10" aria-hidden="true" tabindex="-1"></a>x_train <span class="ot">&lt;-</span> sdf_sans_na[train, <span class="sc">-</span>y_ind]</span>
<span id="cb83-11"><a href="pca-on-weather-data-example.html#cb83-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-12"><a href="pca-on-weather-data-example.html#cb83-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(x_train, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb83-13"><a href="pca-on-weather-data-example.html#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="pca-on-weather-data-example.html#cb83-14" aria-hidden="true" tabindex="-1"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(y_train <span class="sc">~</span> x_train)</span>
<span id="cb83-15"><a href="pca-on-weather-data-example.html#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="pca-on-weather-data-example.html#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb83-17"><a href="pca-on-weather-data-example.html#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="pca-on-weather-data-example.html#cb83-18" aria-hidden="true" tabindex="-1"></a>station_new <span class="ot">&lt;-</span> station <span class="sc">%&gt;%</span> </span>
<span id="cb83-19"><a href="pca-on-weather-data-example.html#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">long_difference =</span> longitude <span class="sc">-</span> station<span class="sc">$</span>longitude[y_ind]) <span class="sc">%&gt;%</span> </span>
<span id="cb83-20"><a href="pca-on-weather-data-example.html#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lat_difference =</span> latitude <span class="sc">-</span> station<span class="sc">$</span>latitude[y_ind]) <span class="sc">%&gt;%</span> </span>
<span id="cb83-21"><a href="pca-on-weather-data-example.html#cb83-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(latitude, longitude, long_difference, lat_difference) <span class="sc">%&gt;%</span> </span>
<span id="cb83-22"><a href="pca-on-weather-data-example.html#cb83-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sum_lat_long =</span> lat_difference <span class="sc">+</span> long_difference) <span class="co">#%&gt;% </span></span>
<span id="cb83-23"><a href="pca-on-weather-data-example.html#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#order(decreasing = TRUE, sum_lat_long)</span></span>
<span id="cb83-24"><a href="pca-on-weather-data-example.html#cb83-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-25"><a href="pca-on-weather-data-example.html#cb83-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-26"><a href="pca-on-weather-data-example.html#cb83-26" aria-hidden="true" tabindex="-1"></a>station_new</span></code></pre></div>
<pre><code>##             latitude longitude long_difference lat_difference sum_lat_long
## USH00011084  31.0581  -87.0547          5.2217       -10.8233      -5.6016
## USH00012813  30.5467  -87.8808          4.3956       -11.3347      -6.9391
## USH00013160  32.8347  -88.1342          4.1422        -9.0467      -4.9045
## USH00013511  32.7017  -87.5808          4.6956        -9.1797      -4.4841
## USH00013816  31.8700  -86.2542          6.0222       -10.0114      -3.9892
## USH00015749  34.7442  -87.5997          4.6767        -7.1372      -2.4605
## USH00017157  34.1736  -86.8133          5.4631        -7.7078      -2.2447
## USH00017304  34.6736  -86.0536          6.2228        -7.2078      -0.9850
## USH00017366  32.4100  -87.0153          5.2611        -9.4714      -4.2103
## USH00018024  33.4164  -86.1350          6.1414        -8.4650      -2.3236
## USH00018178  31.5411  -87.8833          4.3931       -10.3403      -5.9472
## USH00018323  31.8075  -85.9722          6.3042       -10.0739      -3.7697
## USH00018380  33.2119  -87.6161          4.6603        -8.6695      -4.0092
## USH00018438  32.0142  -85.7464          6.5300        -9.8672      -3.3372
## USH00018469  34.5667  -85.6128          6.6636        -7.3147      -0.6511
## USH00020080  32.3697 -112.8600        -20.5836        -9.5117     -30.0953
## USH00021026  33.3761 -112.5828        -20.3064        -8.5053     -28.8117
## USH00021248  36.1533 -109.5394        -17.2630        -5.7281     -22.9911
## USH00021514  33.2058 -111.6819        -19.4055        -8.6756     -28.0811
## USH00021614  34.3494 -111.6981        -19.4217        -7.5320     -26.9537
## USH00023160  35.2681 -111.7428        -19.4664        -6.6133     -26.0797
## USH00023596  36.0528 -112.1503        -19.8739        -5.8286     -25.7025
## USH00024089  34.9094 -110.1544        -17.8780        -6.9720     -24.8500
## USH00024645  35.2000 -114.0167        -21.7403        -6.6814     -28.4217
## USH00024849  36.8644 -111.6022        -19.3258        -5.0170     -24.3428
## USH00025512  33.4044 -110.8700        -18.5936        -8.4770     -27.0706
## USH00026250  34.1547 -114.2897        -22.0133        -7.7267     -29.7400
## USH00026353  31.9356 -109.8378        -17.5614        -9.9458     -27.5072
## USH00026796  34.5706 -112.4322        -20.1558        -7.3108     -27.4666
## USH00027281  33.6731 -111.1508        -18.8744        -8.2083     -27.0827
## USH00027370  33.0800 -111.7417        -19.4653        -8.8014     -28.2667
## USH00027390  32.8150 -109.6808        -17.4044        -9.0664     -26.4708
## USH00027435  34.5172 -109.4028        -17.1264        -7.3642     -24.4906
## USH00027716  35.3322 -112.8797        -20.6033        -6.5492     -27.1525
## USH00028619  31.7056 -110.0569        -17.7805       -10.1758     -27.9563
## USH00028815  32.2292 -110.9536        -18.6772        -9.6522     -28.3294
## USH00029271  33.8169 -109.9833        -17.7069        -8.0645     -25.7714
## USH00029287  33.9792 -112.7403        -20.4639        -7.9022     -28.3661
## USH00029359  35.2406 -112.1903        -19.9139        -6.6408     -26.5547
## USH00029652  32.6114 -114.6350        -22.3586        -9.2700     -31.6286
## USH00030936  34.8822  -91.2153          1.0611        -6.9992      -5.9381
## USH00031596  35.0842  -92.4289         -0.1525        -6.7972      -6.9497
## USH00031632  36.4197  -90.5858          1.6906        -5.4617      -3.7711
## USH00032356  36.4164  -93.7917         -1.5153        -5.4650      -6.9803
## USH00032444  36.1006  -94.1744         -1.8980        -5.7808      -7.6788
## USH00032930  36.4261  -94.4481         -2.1717        -5.4553      -7.6270
## USH00034572  36.4947  -91.5350          0.7414        -5.3867      -4.6453
## USH00034756  34.5731  -94.2494         -1.9730        -7.3083      -9.2813
## USH00035186  35.6042  -91.2744          1.0020        -6.2772      -5.2752
## USH00035512  35.5125  -93.8683         -1.5919        -6.3689      -7.9608
## USH00035754  34.2256  -92.0189          0.2575        -7.6558      -7.3983
## USH00035820  36.2639  -90.9681          1.3083        -5.6175      -4.3092
## USH00035908  33.8203  -93.3878         -1.1114        -8.0611      -9.1725
## USH00036253  33.8100  -91.2703          1.0061        -8.0714      -7.0653
## USH00036928  35.3028  -93.6369         -1.3605        -6.5786      -7.9391
## USH00040693  37.8744 -122.2589        -29.9825        -4.0070     -33.9895
## USH00040924  33.6131 -114.5972        -22.3208        -8.2683     -30.5891
## USH00041048  32.9544 -115.5581        -23.2817        -8.9270     -32.2087
## USH00041614  41.5336 -120.1736        -27.8972        -0.3478     -28.2450
## USH00041715  39.6911 -121.8211        -29.5447        -2.1903     -31.7350
## USH00041758  32.6400 -117.0858        -24.8094        -9.2414     -34.0508
## USH00041912  39.0911 -120.9481        -28.6717        -2.7903     -31.4620
## USH00042239  32.9897 -116.5872        -24.3108        -8.8917     -33.2025
## USH00042294  38.5350 -121.7761        -29.4997        -3.3464     -32.8461
## USH00042319  36.4622 -116.8669        -24.5905        -5.4192     -30.0097
## USH00042728  38.3306 -120.6706        -28.3942        -3.5508     -31.9450
## USH00042910  40.8097 -124.1603        -31.8839        -1.0717     -32.9556
## USH00042941  34.7042 -118.4275        -26.1511        -7.1772     -33.3283
## USH00043161  39.5092 -123.7567        -31.4803        -2.3722     -33.8525
## USH00043257  36.7800 -119.7194        -27.4430        -5.1014     -32.5444
## USH00043747  36.3219 -119.6356        -27.3592        -5.5595     -32.9187
## USH00043761  41.8042 -123.3758        -31.0994        -0.0772     -31.1766
## USH00043875  38.6175 -122.8731        -30.5967        -3.2639     -33.8606
## USH00044232  36.7981 -118.2036        -25.9272        -5.0833     -31.0105
## USH00044259  33.7086 -116.2153        -23.9389        -8.1728     -32.1117
## USH00044713  39.3183 -120.6392        -28.3628        -2.5631     -30.9259
## USH00044890  36.3817 -119.0264        -26.7500        -5.4997     -32.2497
## USH00044997  37.6922 -121.7692        -29.4928        -4.1892     -33.6820
## USH00045032  38.1061 -121.2878        -29.0114        -3.7753     -32.7867
## USH00045385  39.1458 -121.5853        -29.3089        -2.7356     -32.0445
## USH00045532  37.2858 -120.5117        -28.2353        -4.5956     -32.8309
## USH00045983  41.3206 -122.3081        -30.0317        -0.5608     -30.5925
## USH00046074  38.2778 -122.2647        -29.9883        -3.6036     -33.5919
## USH00046118  34.7675 -114.6189        -22.3425        -7.1139     -29.4564
## USH00046175  33.6025 -117.8803        -25.6039        -8.2789     -33.8828
## USH00046399  34.4478 -119.2275        -26.9511        -7.4336     -34.3847
## USH00046506  39.7458 -122.1997        -29.9233        -2.1356     -32.0589
## USH00046508  41.3089 -123.5317        -31.2553        -0.5725     -31.8278
## USH00046719  34.1483 -118.1447        -25.8683        -7.7331     -33.6014
## USH00046730  35.6278 -120.6856        -28.4092        -6.2536     -34.6628
## USH00046826  38.2578 -122.6078        -30.3314        -3.6236     -33.9550
## USH00047195  39.9367 -120.9475        -28.6711        -1.9447     -30.6158
## USH00047304  40.5175 -122.2986        -30.0222        -1.3639     -31.3861
## USH00047306  34.0528 -117.1894        -24.9130        -7.8286     -32.7416
## USH00047851  35.3056 -120.6639        -28.3875        -6.5758     -34.9633
## USH00047902  34.4167 -119.6844        -27.4080        -7.4647     -34.8727
## USH00047916  36.9906 -121.9911        -29.7147        -4.8908     -34.6055
## USH00047965  38.4381 -122.6978        -30.4214        -3.4433     -33.8647
## USH00048702  40.4167 -120.6631        -28.3867        -1.4647     -29.8514
## USH00048758  39.1678 -120.1428        -27.8664        -2.7136     -30.5800
## USH00048839  35.0233 -118.7497        -26.4733        -6.8581     -33.3314
## USH00049087  33.7025 -117.7539        -25.4775        -8.1789     -33.6564
## USH00049122  39.1467 -123.2103        -30.9339        -2.7347     -33.6686
## USH00049200  38.3956 -121.9608        -29.6844        -3.4858     -33.1702
## USH00049452  35.5975 -119.3531        -27.0767        -6.2839     -33.3606
## USH00049490  40.7222 -122.9331        -30.6567        -1.1592     -31.8159
## USH00049699  39.5231 -122.3058        -30.0294        -2.3583     -32.3877
## USH00049855  37.7500 -119.5897        -27.3133        -4.1314     -31.4447
## USH00049866  41.7036 -122.6408        -30.3644        -0.1778     -30.5422
## USH00050848  39.9919 -105.2667        -12.9903        -1.8895     -14.8798
## USH00051294  38.4600 -105.2256        -12.9492        -3.4214     -16.3706
## USH00051528  39.2203 -105.2783        -13.0019        -2.6611     -15.6630
## USH00051564  38.8236 -102.3486        -10.0722        -3.0578     -13.1300
## USH00051741  39.2425 -107.9631        -15.6867        -2.6389     -18.3256
## USH00052184  37.6742 -106.3247        -14.0483        -4.2072     -18.2555
## USH00052281  39.6261 -106.0353        -13.7589        -2.2553     -16.0142
## USH00052446  38.4775 -102.7808        -10.5044        -3.4039     -13.9083
## USH00053005  40.6147 -105.1314        -12.8550        -1.2667     -14.1217
## USH00053038  40.2600 -103.8156        -11.5392        -1.6214     -13.1606
## USH00053146  39.1653 -108.7331        -16.4567        -2.7161     -19.1728
## USH00053662  38.5258 -106.9675        -14.6911        -3.3556     -18.0467
## USH00053951  37.7717 -107.1097        -14.8333        -4.1097     -18.9430
## USH00054076  38.0494 -102.1236         -9.8472        -3.8320     -13.6792
## USH00054770  38.0936 -102.6306        -10.3542        -3.7878     -14.1420
## USH00054834  38.0636 -103.2153        -10.9389        -3.8178     -14.7567
## USH00055322  37.1742 -105.9392        -13.6628        -4.7072     -18.3700
## USH00055722  38.4858 -107.8792        -15.6028        -3.3956     -18.9984
## USH00057167  38.0392 -103.6933        -11.4169        -3.8422     -15.2591
## USH00057337  38.0858 -106.1444        -13.8680        -3.7956     -17.6636
## USH00057936  40.4883 -106.8233        -14.5469        -1.3931     -15.9400
## USH00058204  37.9492 -107.8733        -15.5969        -3.9322     -19.5291
## USH00058429  37.1786 -104.4869        -12.2105        -4.7028     -16.9133
## USH00059243  40.0583 -102.2189         -9.9425        -1.8231     -11.7656
## USH00062658  41.9500  -73.3667         18.9097         0.0686      18.9783
## USH00063207  41.3506  -72.0394         20.2370        -0.5308      19.7062
## USH00067970  41.1247  -73.5475         18.7289        -0.7567      17.9722
## USH00068138  41.7950  -72.2283         20.0481        -0.0864      19.9617
## USH00072730  39.2583  -75.5167         16.7597        -2.6231      14.1366
## USH00073595  38.8161  -75.5761         16.7003        -3.0653      13.6350
## USH00075915  38.8983  -75.4250         16.8514        -2.9831      13.8683
## USH00076410  39.6694  -75.7514         16.5250        -2.2120      14.3130
## USH00079605  39.7739  -75.5414         16.7350        -2.1075      14.6275
## USH00080211  29.7258  -85.0206          7.2558       -12.1556      -4.8998
## USH00080228  27.2181  -81.8739         10.4025       -14.6633      -4.2608
## USH00080478  27.8986  -81.8433         10.4331       -13.9828      -3.5497
## USH00080611  26.6928  -80.6711         11.6053       -15.1886      -3.5833
## USH00082220  30.7244  -86.0939          6.1825       -11.1570      -4.9745
## USH00082850  25.8489  -81.3897         10.8867       -16.0325      -5.1458
## USH00082915  29.7550  -81.5389         10.7375       -12.1264      -1.3889
## USH00082944  30.6589  -81.4636         10.8128       -11.2225      -0.4097
## USH00083163  26.1019  -80.2011         12.0753       -15.7795      -3.7042
## USH00083186  26.5850  -81.8614         10.4150       -15.2964      -4.8814
## USH00083207  27.4622  -80.3539         11.9225       -14.4192      -2.4967
## USH00084289  28.8031  -82.3125          9.9639       -13.0783      -3.1144
## USH00084570  24.5550  -81.7522         10.5242       -17.3264      -6.8022
## USH00084731  30.1853  -82.5942          9.6822       -11.6961      -2.0139
## USH00085275  30.4517  -83.4119          8.8645       -11.4297      -2.5652
## USH00086414  29.0803  -82.0778         10.1986       -12.8011      -2.6025
## USH00086997  30.4781  -87.1869          5.0895       -11.4033      -6.3138
## USH00087020  25.5819  -80.4361         11.8403       -16.2995      -4.4592
## USH00087851  28.3378  -82.2600         10.0164       -13.5436      -3.5272
## USH00088758  30.3931  -84.3533          7.9231       -11.4883      -3.5652
## USH00088824  28.1586  -82.7644          9.5120       -13.7228      -4.2108
## USH00088942  28.6242  -80.8158         11.4606       -13.2572      -1.7966
## USH00090140  31.5339  -84.1489          8.1275       -10.3475      -2.2200
## USH00090586  30.8228  -84.6175          7.6589       -11.0586      -3.3997
## USH00091340  31.1681  -81.5022         10.7742       -10.7133       0.0609
## USH00091500  31.1903  -84.2036          8.0728       -10.6911      -2.6183
## USH00092318  33.5972  -83.8436          8.4328        -8.2842       0.1486
## USH00092475  34.5292  -83.9900          8.2864        -7.3522       0.9342
## USH00092966  32.2003  -83.2058          9.0706        -9.6811      -0.6105
## USH00093621  34.3006  -83.8600          8.4164        -7.5808       0.8356
## USH00093754  31.9881  -81.9522         10.3242        -9.8933       0.4309
## USH00094170  33.2842  -83.4681          8.8083        -8.5972       0.2111
## USH00095874  33.0831  -83.2497          9.0267        -8.7983       0.2284
## USH00095882  32.8703  -81.9672         10.3092        -9.0111       1.2981
## USH00096335  33.4544  -84.8178          7.4586        -8.4270      -0.9684
## USH00097276  30.7836  -83.5692          8.7072       -11.0978      -2.3906
## USH00097600  34.2453  -85.1514          7.1250        -7.6361      -0.5111
## USH00097847  32.1300  -81.2100         11.0664        -9.7514       1.3150
## USH00098535  32.6875  -84.5197          7.7567        -9.1939      -1.4372
## USH00098703  31.4461  -83.4767          8.7997       -10.4353      -1.6356
## USH00098740  34.5786  -83.3319          8.9445        -7.3028       1.6417
## USH00099141  33.4028  -82.6222          9.6542        -8.4786       1.1756
## USH00099157  33.7264  -82.7058          9.5706        -8.1550       1.4156
## USH00099186  31.2514  -82.3128          9.9636       -10.6300      -0.6664
## USH00099291  32.8694  -85.1892          7.0872        -9.0120      -1.9248
## USH00100010  42.9536 -112.8253        -20.5489         1.0722     -19.4767
## USH00100448  43.5936 -115.9236        -23.6472         1.7122     -21.9350
## USH00100470  44.0425 -111.2739        -18.9975         2.1611     -16.8364
## USH00100803  42.3353 -111.3850        -19.1086         0.4539     -18.6547
## USH00101408  44.5733 -116.6753        -24.3989         2.6919     -21.7070
## USH00101956  47.6789 -116.8017        -24.5253         5.7975     -18.7278
## USH00102845  46.5022 -116.3217        -24.0453         4.6208     -19.4245
## USH00103143  46.0931 -115.5356        -23.2592         4.2117     -19.0475
## USH00103631  42.9403 -115.3231        -23.0467         1.0589     -21.9878
## USH00103732  42.5872 -111.7275        -19.4511         0.7058     -18.7453
## USH00104140  42.5972 -114.1378        -21.8614         0.7158     -21.1456
## USH00104295  42.3528 -114.5739        -22.2975         0.4714     -21.8261
## USH00104670  42.7325 -114.5192        -22.2428         0.8511     -21.3917
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 1018 rows ]</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="pca-on-weather-data-example.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#closest &lt;- which(min(station$longitude + station$latitude))</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="principal-component-analysis-applied.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidyverse-tools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/06-linear_model_wrapup_weather.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/06-linear_model_wrapup_weather.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
