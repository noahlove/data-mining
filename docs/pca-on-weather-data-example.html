<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 PCA on weather data example | Data Mining</title>
  <meta name="description" content="Chapter 5 PCA on weather data example | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 PCA on weather data example | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 PCA on weather data example | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="principal-component-analysis-applied.html"/>
<link rel="next" href="comparing-different-models.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>2</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>3</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>3.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>3.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="3.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>3.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>4.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>4.1.1</b> Other example</a></li>
<li class="chapter" data-level="4.1.2" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#fishing-out-various-titles"><i class="fa fa-check"></i><b>4.1.2</b> Fishing out various titles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html"><i class="fa fa-check"></i><b>5</b> PCA on weather data example</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#different-noramlizations"><i class="fa fa-check"></i><b>5.1</b> Different noramlizations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#no-normalization"><i class="fa fa-check"></i><b>5.1.1</b> No normalization</a></li>
<li class="chapter" data-level="5.1.2" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.1.2</b> Centering and scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="comparing-different-models.html"><a href="comparing-different-models.html"><i class="fa fa-check"></i><b>6</b> Comparing different models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-0"><i class="fa fa-check"></i><b>6.1</b> Question 0</a></li>
<li class="chapter" data-level="6.2" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-1"><i class="fa fa-check"></i><b>6.2</b> Question 1</a></li>
<li class="chapter" data-level="6.3" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-2"><i class="fa fa-check"></i><b>6.3</b> Question 2</a></li>
<li class="chapter" data-level="6.4" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-3"><i class="fa fa-check"></i><b>6.4</b> Question 3</a></li>
<li class="chapter" data-level="6.5" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-4"><i class="fa fa-check"></i><b>6.5</b> Question 4</a></li>
<li class="chapter" data-level="6.6" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-5"><i class="fa fa-check"></i><b>6.6</b> Question 5</a></li>
<li class="chapter" data-level="6.7" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-6"><i class="fa fa-check"></i><b>6.7</b> Question 6</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html"><i class="fa fa-check"></i><b>7</b> Tidyverse tools</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#select"><i class="fa fa-check"></i><b>7.1</b> Select</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#original-data-set"><i class="fa fa-check"></i><b>7.1.1</b> Original Data Set</a></li>
<li class="chapter" data-level="7.1.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#other-select-functions"><i class="fa fa-check"></i><b>7.1.2</b> Other select functions:</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#filter"><i class="fa fa-check"></i><b>7.2</b> Filter</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#logical-tests-in-r"><i class="fa fa-check"></i><b>7.2.1</b> Logical Tests in R</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#mutate"><i class="fa fa-check"></i><b>7.3</b> Mutate</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-mutate-functions"><i class="fa fa-check"></i><b>7.3.1</b> Useful mutate functions:</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#summarise-summarize"><i class="fa fa-check"></i><b>7.4</b> Summarise / Summarize</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-summary-functions"><i class="fa fa-check"></i><b>7.4.1</b> Useful summary functions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#arrange"><i class="fa fa-check"></i><b>7.5</b> Arrange()</a></li>
<li class="chapter" data-level="7.6" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#group_by"><i class="fa fa-check"></i><b>7.6</b> Group_by()</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pca-on-weather-data-example" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> PCA on weather data example</h1>
<ul>
<li>Wrap up the citation problem</li>
<li>Play with weather data, tmax, celsius</li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="pca-on-weather-data-example.html#cb74-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/ushcn.csv&quot;</span>)</span>
<span id="cb74-2"><a href="pca-on-weather-data-example.html#cb74-2" aria-hidden="true" tabindex="-1"></a>station <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/station_metadata.csv&quot;</span>)</span>
<span id="cb74-3"><a href="pca-on-weather-data-example.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(station) <span class="ot">&lt;-</span> station<span class="sc">$</span>id</span>
<span id="cb74-4"><a href="pca-on-weather-data-example.html#cb74-4" aria-hidden="true" tabindex="-1"></a>meta_sort <span class="ot">&lt;-</span> station[<span class="fu">names</span>(df)[<span class="sc">-</span><span class="dv">1</span>], <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>)]</span>
<span id="cb74-5"><a href="pca-on-weather-data-example.html#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="pca-on-weather-data-example.html#cb74-6" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb74-7"><a href="pca-on-weather-data-example.html#cb74-7" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb74-8"><a href="pca-on-weather-data-example.html#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="pca-on-weather-data-example.html#cb74-9" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb74-10"><a href="pca-on-weather-data-example.html#cb74-10" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb74-11"><a href="pca-on-weather-data-example.html#cb74-11" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb74-12"><a href="pca-on-weather-data-example.html#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb74-13"><a href="pca-on-weather-data-example.html#cb74-13" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb74-14"><a href="pca-on-weather-data-example.html#cb74-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-15"><a href="pca-on-weather-data-example.html#cb74-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb74-16"><a href="pca-on-weather-data-example.html#cb74-16" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;RdYlBu&quot;</span>)</span>
<span id="cb74-17"><a href="pca-on-weather-data-example.html#cb74-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-18"><a href="pca-on-weather-data-example.html#cb74-18" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na)</span>
<span id="cb74-19"><a href="pca-on-weather-data-example.html#cb74-19" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/no_norm_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb74-20"><a href="pca-on-weather-data-example.html#cb74-20" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb74-21"><a href="pca-on-weather-data-example.html#cb74-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb74-22"><a href="pca-on-weather-data-example.html#cb74-22" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb74-23"><a href="pca-on-weather-data-example.html#cb74-23" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb74-24"><a href="pca-on-weather-data-example.html#cb74-24" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb74-25"><a href="pca-on-weather-data-example.html#cb74-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb74-26"><a href="pca-on-weather-data-example.html#cb74-26" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb74-27"><a href="pca-on-weather-data-example.html#cb74-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb74-28"><a href="pca-on-weather-data-example.html#cb74-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb74-29"><a href="pca-on-weather-data-example.html#cb74-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb74-30"><a href="pca-on-weather-data-example.html#cb74-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb74-31"><a href="pca-on-weather-data-example.html#cb74-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb74-32"><a href="pca-on-weather-data-example.html#cb74-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb74-33"><a href="pca-on-weather-data-example.html#cb74-33" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<div class="figure">
<img src="Pictures/no_norm_pca.png" alt="" />
<p class="caption">Eigenvector 1 and two mapped</p>
</div>
<p>The two are telling in very different ways. The first shows the relationships of the coasts. The second shows east versus west. This is with default normalization: centering, but not scaling.</p>
<div id="different-noramlizations" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Different noramlizations</h2>
<p>Run PCA with 3 different types of normalization on the maximum temperature data, then plot the “maps” of the loading values corresponding to the first 2 eigenvectors.</p>
<ul>
<li>No normalization, i.e. no centering and no scaling</li>
<li>Centering but no scaling</li>
<li>Centering and scaling</li>
</ul>
<p>Write out what do you observe.</p>
<div id="no-normalization" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> No normalization</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="pca-on-weather-data-example.html#cb76-1" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb76-2"><a href="pca-on-weather-data-example.html#cb76-2" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb76-3"><a href="pca-on-weather-data-example.html#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="pca-on-weather-data-example.html#cb76-4" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb76-5"><a href="pca-on-weather-data-example.html#cb76-5" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb76-6"><a href="pca-on-weather-data-example.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb76-7"><a href="pca-on-weather-data-example.html#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb76-8"><a href="pca-on-weather-data-example.html#cb76-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb76-9"><a href="pca-on-weather-data-example.html#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="pca-on-weather-data-example.html#cb76-10" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">7</span>, <span class="st">&quot;RdYlBu&quot;</span>)</span>
<span id="cb76-11"><a href="pca-on-weather-data-example.html#cb76-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-12"><a href="pca-on-weather-data-example.html#cb76-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na, <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">center =</span> <span class="cn">FALSE</span>)</span>
<span id="cb76-13"><a href="pca-on-weather-data-example.html#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/no_standardization_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb76-14"><a href="pca-on-weather-data-example.html#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb76-15"><a href="pca-on-weather-data-example.html#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb76-16"><a href="pca-on-weather-data-example.html#cb76-16" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb76-17"><a href="pca-on-weather-data-example.html#cb76-17" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb76-18"><a href="pca-on-weather-data-example.html#cb76-18" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb76-19"><a href="pca-on-weather-data-example.html#cb76-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb76-20"><a href="pca-on-weather-data-example.html#cb76-20" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb76-21"><a href="pca-on-weather-data-example.html#cb76-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb76-22"><a href="pca-on-weather-data-example.html#cb76-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb76-23"><a href="pca-on-weather-data-example.html#cb76-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb76-24"><a href="pca-on-weather-data-example.html#cb76-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb76-25"><a href="pca-on-weather-data-example.html#cb76-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb76-26"><a href="pca-on-weather-data-example.html#cb76-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-27"><a href="pca-on-weather-data-example.html#cb76-27" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
</div>
<div id="centering-and-scaling" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Centering and scaling</h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="pca-on-weather-data-example.html#cb78-1" aria-hidden="true" tabindex="-1"></a>prop_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(df[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">1</span>,</span>
<span id="cb78-2"><a href="pca-on-weather-data-example.html#cb78-2" aria-hidden="true" tabindex="-1"></a>                 <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb78-3"><a href="pca-on-weather-data-example.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="pca-on-weather-data-example.html#cb78-4" aria-hidden="true" tabindex="-1"></a>sdf <span class="ot">&lt;-</span> df[prop_na <span class="sc">&lt;</span> <span class="fl">0.1</span>, ]</span>
<span id="cb78-5"><a href="pca-on-weather-data-example.html#cb78-5" aria-hidden="true" tabindex="-1"></a>sdf_sans_na <span class="ot">&lt;-</span> <span class="fu">apply</span>(sdf[, <span class="sc">-</span><span class="dv">1</span>], <span class="dv">2</span>, <span class="cf">function</span>(x){</span>
<span id="cb78-6"><a href="pca-on-weather-data-example.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb78-7"><a href="pca-on-weather-data-example.html#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb78-8"><a href="pca-on-weather-data-example.html#cb78-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb78-9"><a href="pca-on-weather-data-example.html#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="pca-on-weather-data-example.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb78-11"><a href="pca-on-weather-data-example.html#cb78-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-12"><a href="pca-on-weather-data-example.html#cb78-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(sdf_sans_na, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-13"><a href="pca-on-weather-data-example.html#cb78-13" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;Pictures/centering_and_scaling_pca.png&quot;</span>, <span class="dv">600</span>, <span class="dv">800</span>)</span>
<span id="cb78-14"><a href="pca-on-weather-data-example.html#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb78-15"><a href="pca-on-weather-data-example.html#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb78-16"><a href="pca-on-weather-data-example.html#cb78-16" aria-hidden="true" tabindex="-1"></a>  eigvec <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>rotation[, i]</span>
<span id="cb78-17"><a href="pca-on-weather-data-example.html#cb78-17" aria-hidden="true" tabindex="-1"></a>  breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(eigvec), <span class="fu">max</span>(eigvec), <span class="at">length.out=</span><span class="fu">length</span>(cols)<span class="sc">+</span><span class="dv">1</span>)</span>
<span id="cb78-18"><a href="pca-on-weather-data-example.html#cb78-18" aria-hidden="true" tabindex="-1"></a>  col_factors <span class="ot">&lt;-</span> <span class="fu">cut</span>(eigvec, <span class="at">breaks=</span>breaks)</span>
<span id="cb78-19"><a href="pca-on-weather-data-example.html#cb78-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(meta_sort<span class="sc">$</span>longitude,</span>
<span id="cb78-20"><a href="pca-on-weather-data-example.html#cb78-20" aria-hidden="true" tabindex="-1"></a>       meta_sort<span class="sc">$</span>latitude,</span>
<span id="cb78-21"><a href="pca-on-weather-data-example.html#cb78-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span>cols[col_factors],</span>
<span id="cb78-22"><a href="pca-on-weather-data-example.html#cb78-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>)</span>
<span id="cb78-23"><a href="pca-on-weather-data-example.html#cb78-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb78-24"><a href="pca-on-weather-data-example.html#cb78-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="fu">levels</span>(col_factors),</span>
<span id="cb78-25"><a href="pca-on-weather-data-example.html#cb78-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill=</span>cols)</span>
<span id="cb78-26"><a href="pca-on-weather-data-example.html#cb78-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-27"><a href="pca-on-weather-data-example.html#cb78-27" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<p>Scaling is super common. When you have different units you always usually scale. However, sometimes, with things like weather data, you might not have to. PCA is trying to find a very consice, uncorrelated description of your data. If things are close to 0, they won’t effect.</p>
<p>Subset out the last 144 rows for testing, then pick one station to be our Y and the other stations to be our X.</p>
<ul>
<li>Run PCA on the X values, then fit an OLS</li>
<li>Run OLS but only use the closest station (don’t bother with projecting, assuming Long/Lat are equidistance for now) as your X.</li>
</ul>
<p>Which one will do best?</p>
<p>(if you have time, try Lasso with all of the data, this may take awhile….don’t do this unless you have time)</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="pca-on-weather-data-example.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Takes last 144 for testing</span></span>
<span id="cb80-2"><a href="pca-on-weather-data-example.html#cb80-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(sdf_sans_na) <span class="sc">-</span> <span class="dv">144</span>)</span>
<span id="cb80-3"><a href="pca-on-weather-data-example.html#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="pca-on-weather-data-example.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Samples and individual X to be the Y point</span></span>
<span id="cb80-5"><a href="pca-on-weather-data-example.html#cb80-5" aria-hidden="true" tabindex="-1"></a>y_ind <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">ncol</span>(sdf_sans_na), <span class="dv">1</span>)</span>
<span id="cb80-6"><a href="pca-on-weather-data-example.html#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="pca-on-weather-data-example.html#cb80-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-8"><a href="pca-on-weather-data-example.html#cb80-8" aria-hidden="true" tabindex="-1"></a>y_train <span class="ot">&lt;-</span> sdf_sans_na[train, y_ind]</span>
<span id="cb80-9"><a href="pca-on-weather-data-example.html#cb80-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-10"><a href="pca-on-weather-data-example.html#cb80-10" aria-hidden="true" tabindex="-1"></a>x_train <span class="ot">&lt;-</span> sdf_sans_na[train, <span class="sc">-</span>y_ind]</span>
<span id="cb80-11"><a href="pca-on-weather-data-example.html#cb80-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-12"><a href="pca-on-weather-data-example.html#cb80-12" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(x_train, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb80-13"><a href="pca-on-weather-data-example.html#cb80-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-14"><a href="pca-on-weather-data-example.html#cb80-14" aria-hidden="true" tabindex="-1"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(y_train <span class="sc">~</span> x_train)</span>
<span id="cb80-15"><a href="pca-on-weather-data-example.html#cb80-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-16"><a href="pca-on-weather-data-example.html#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ──── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ tibble  3.0.6     ✓ dplyr   1.0.4
## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.1
## ✓ purrr   0.3.4</code></pre>
<pre><code>## ── Conflicts ─────── tidyverse_conflicts() ──
## x dplyr::filter()  masks stats::filter()
## x purrr::flatten() masks jsonlite::flatten()
## x dplyr::lag()     masks stats::lag()
## x purrr::lift()    masks caret::lift()</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="pca-on-weather-data-example.html#cb84-1" aria-hidden="true" tabindex="-1"></a>station_new <span class="ot">&lt;-</span> station <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="pca-on-weather-data-example.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">long_difference =</span> longitude <span class="sc">-</span> station<span class="sc">$</span>longitude[y_ind]) <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="pca-on-weather-data-example.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lat_difference =</span> latitude <span class="sc">-</span> station<span class="sc">$</span>latitude[y_ind]) <span class="sc">%&gt;%</span> </span>
<span id="cb84-4"><a href="pca-on-weather-data-example.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(latitude, longitude, long_difference, lat_difference) <span class="sc">%&gt;%</span> </span>
<span id="cb84-5"><a href="pca-on-weather-data-example.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sum_lat_long =</span> lat_difference <span class="sc">+</span> long_difference) <span class="co">#%&gt;% </span></span>
<span id="cb84-6"><a href="pca-on-weather-data-example.html#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#order(decreasing = TRUE, sum_lat_long)</span></span>
<span id="cb84-7"><a href="pca-on-weather-data-example.html#cb84-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-8"><a href="pca-on-weather-data-example.html#cb84-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-9"><a href="pca-on-weather-data-example.html#cb84-9" aria-hidden="true" tabindex="-1"></a>station_new</span></code></pre></div>
<pre><code>##             latitude longitude
## USH00011084  31.0581  -87.0547
## USH00012813  30.5467  -87.8808
## USH00013160  32.8347  -88.1342
## USH00013511  32.7017  -87.5808
## USH00013816  31.8700  -86.2542
## USH00015749  34.7442  -87.5997
## USH00017157  34.1736  -86.8133
## USH00017304  34.6736  -86.0536
## USH00017366  32.4100  -87.0153
## USH00018024  33.4164  -86.1350
## USH00018178  31.5411  -87.8833
## USH00018323  31.8075  -85.9722
## USH00018380  33.2119  -87.6161
## USH00018438  32.0142  -85.7464
## USH00018469  34.5667  -85.6128
## USH00020080  32.3697 -112.8600
## USH00021026  33.3761 -112.5828
## USH00021248  36.1533 -109.5394
## USH00021514  33.2058 -111.6819
## USH00021614  34.3494 -111.6981
## USH00023160  35.2681 -111.7428
## USH00023596  36.0528 -112.1503
## USH00024089  34.9094 -110.1544
## USH00024645  35.2000 -114.0167
## USH00024849  36.8644 -111.6022
## USH00025512  33.4044 -110.8700
## USH00026250  34.1547 -114.2897
## USH00026353  31.9356 -109.8378
## USH00026796  34.5706 -112.4322
## USH00027281  33.6731 -111.1508
## USH00027370  33.0800 -111.7417
## USH00027390  32.8150 -109.6808
## USH00027435  34.5172 -109.4028
## USH00027716  35.3322 -112.8797
## USH00028619  31.7056 -110.0569
## USH00028815  32.2292 -110.9536
## USH00029271  33.8169 -109.9833
## USH00029287  33.9792 -112.7403
## USH00029359  35.2406 -112.1903
## USH00029652  32.6114 -114.6350
## USH00030936  34.8822  -91.2153
## USH00031596  35.0842  -92.4289
## USH00031632  36.4197  -90.5858
## USH00032356  36.4164  -93.7917
## USH00032444  36.1006  -94.1744
## USH00032930  36.4261  -94.4481
## USH00034572  36.4947  -91.5350
## USH00034756  34.5731  -94.2494
## USH00035186  35.6042  -91.2744
## USH00035512  35.5125  -93.8683
## USH00035754  34.2256  -92.0189
## USH00035820  36.2639  -90.9681
## USH00035908  33.8203  -93.3878
## USH00036253  33.8100  -91.2703
## USH00036928  35.3028  -93.6369
## USH00040693  37.8744 -122.2589
## USH00040924  33.6131 -114.5972
## USH00041048  32.9544 -115.5581
## USH00041614  41.5336 -120.1736
## USH00041715  39.6911 -121.8211
## USH00041758  32.6400 -117.0858
## USH00041912  39.0911 -120.9481
## USH00042239  32.9897 -116.5872
## USH00042294  38.5350 -121.7761
## USH00042319  36.4622 -116.8669
## USH00042728  38.3306 -120.6706
## USH00042910  40.8097 -124.1603
## USH00042941  34.7042 -118.4275
## USH00043161  39.5092 -123.7567
## USH00043257  36.7800 -119.7194
## USH00043747  36.3219 -119.6356
## USH00043761  41.8042 -123.3758
## USH00043875  38.6175 -122.8731
## USH00044232  36.7981 -118.2036
## USH00044259  33.7086 -116.2153
## USH00044713  39.3183 -120.6392
## USH00044890  36.3817 -119.0264
## USH00044997  37.6922 -121.7692
## USH00045032  38.1061 -121.2878
## USH00045385  39.1458 -121.5853
## USH00045532  37.2858 -120.5117
## USH00045983  41.3206 -122.3081
## USH00046074  38.2778 -122.2647
## USH00046118  34.7675 -114.6189
## USH00046175  33.6025 -117.8803
## USH00046399  34.4478 -119.2275
## USH00046506  39.7458 -122.1997
## USH00046508  41.3089 -123.5317
## USH00046719  34.1483 -118.1447
## USH00046730  35.6278 -120.6856
## USH00046826  38.2578 -122.6078
## USH00047195  39.9367 -120.9475
## USH00047304  40.5175 -122.2986
## USH00047306  34.0528 -117.1894
## USH00047851  35.3056 -120.6639
## USH00047902  34.4167 -119.6844
## USH00047916  36.9906 -121.9911
## USH00047965  38.4381 -122.6978
## USH00048702  40.4167 -120.6631
## USH00048758  39.1678 -120.1428
## USH00048839  35.0233 -118.7497
## USH00049087  33.7025 -117.7539
## USH00049122  39.1467 -123.2103
## USH00049200  38.3956 -121.9608
## USH00049452  35.5975 -119.3531
## USH00049490  40.7222 -122.9331
## USH00049699  39.5231 -122.3058
## USH00049855  37.7500 -119.5897
## USH00049866  41.7036 -122.6408
## USH00050848  39.9919 -105.2667
## USH00051294  38.4600 -105.2256
## USH00051528  39.2203 -105.2783
## USH00051564  38.8236 -102.3486
## USH00051741  39.2425 -107.9631
## USH00052184  37.6742 -106.3247
## USH00052281  39.6261 -106.0353
## USH00052446  38.4775 -102.7808
## USH00053005  40.6147 -105.1314
## USH00053038  40.2600 -103.8156
## USH00053146  39.1653 -108.7331
## USH00053662  38.5258 -106.9675
## USH00053951  37.7717 -107.1097
## USH00054076  38.0494 -102.1236
## USH00054770  38.0936 -102.6306
## USH00054834  38.0636 -103.2153
## USH00055322  37.1742 -105.9392
## USH00055722  38.4858 -107.8792
## USH00057167  38.0392 -103.6933
## USH00057337  38.0858 -106.1444
## USH00057936  40.4883 -106.8233
## USH00058204  37.9492 -107.8733
## USH00058429  37.1786 -104.4869
## USH00059243  40.0583 -102.2189
## USH00062658  41.9500  -73.3667
## USH00063207  41.3506  -72.0394
## USH00067970  41.1247  -73.5475
## USH00068138  41.7950  -72.2283
## USH00072730  39.2583  -75.5167
## USH00073595  38.8161  -75.5761
## USH00075915  38.8983  -75.4250
## USH00076410  39.6694  -75.7514
## USH00079605  39.7739  -75.5414
## USH00080211  29.7258  -85.0206
## USH00080228  27.2181  -81.8739
## USH00080478  27.8986  -81.8433
## USH00080611  26.6928  -80.6711
## USH00082220  30.7244  -86.0939
## USH00082850  25.8489  -81.3897
## USH00082915  29.7550  -81.5389
## USH00082944  30.6589  -81.4636
## USH00083163  26.1019  -80.2011
## USH00083186  26.5850  -81.8614
## USH00083207  27.4622  -80.3539
## USH00084289  28.8031  -82.3125
## USH00084570  24.5550  -81.7522
## USH00084731  30.1853  -82.5942
## USH00085275  30.4517  -83.4119
## USH00086414  29.0803  -82.0778
## USH00086997  30.4781  -87.1869
## USH00087020  25.5819  -80.4361
## USH00087851  28.3378  -82.2600
## USH00088758  30.3931  -84.3533
## USH00088824  28.1586  -82.7644
## USH00088942  28.6242  -80.8158
## USH00090140  31.5339  -84.1489
## USH00090586  30.8228  -84.6175
## USH00091340  31.1681  -81.5022
## USH00091500  31.1903  -84.2036
## USH00092318  33.5972  -83.8436
## USH00092475  34.5292  -83.9900
## USH00092966  32.2003  -83.2058
## USH00093621  34.3006  -83.8600
## USH00093754  31.9881  -81.9522
## USH00094170  33.2842  -83.4681
## USH00095874  33.0831  -83.2497
## USH00095882  32.8703  -81.9672
## USH00096335  33.4544  -84.8178
## USH00097276  30.7836  -83.5692
## USH00097600  34.2453  -85.1514
## USH00097847  32.1300  -81.2100
## USH00098535  32.6875  -84.5197
## USH00098703  31.4461  -83.4767
## USH00098740  34.5786  -83.3319
## USH00099141  33.4028  -82.6222
## USH00099157  33.7264  -82.7058
## USH00099186  31.2514  -82.3128
## USH00099291  32.8694  -85.1892
## USH00100010  42.9536 -112.8253
## USH00100448  43.5936 -115.9236
## USH00100470  44.0425 -111.2739
## USH00100803  42.3353 -111.3850
## USH00101408  44.5733 -116.6753
## USH00101956  47.6789 -116.8017
## USH00102845  46.5022 -116.3217
## USH00103143  46.0931 -115.5356
## USH00103631  42.9403 -115.3231
## USH00103732  42.5872 -111.7275
## USH00104140  42.5972 -114.1378
## USH00104295  42.3528 -114.5739
## USH00104670  42.7325 -114.5192
##             long_difference lat_difference
## USH00011084         -8.7089        -4.4583
## USH00012813         -9.5350        -4.9697
## USH00013160         -9.7884        -2.6817
## USH00013511         -9.2350        -2.8147
## USH00013816         -7.9084        -3.6464
## USH00015749         -9.2539        -0.7722
## USH00017157         -8.4675        -1.3428
## USH00017304         -7.7078        -0.8428
## USH00017366         -8.6695        -3.1064
## USH00018024         -7.7892        -2.1000
## USH00018178         -9.5375        -3.9753
## USH00018323         -7.6264        -3.7089
## USH00018380         -9.2703        -2.3045
## USH00018438         -7.4006        -3.5022
## USH00018469         -7.2670        -0.9497
## USH00020080        -34.5142        -3.1467
## USH00021026        -34.2370        -2.1403
## USH00021248        -31.1936         0.6369
## USH00021514        -33.3361        -2.3106
## USH00021614        -33.3523        -1.1670
## USH00023160        -33.3970        -0.2483
## USH00023596        -33.8045         0.5364
## USH00024089        -31.8086        -0.6070
## USH00024645        -35.6709        -0.3164
## USH00024849        -33.2564         1.3480
## USH00025512        -32.5242        -2.1120
## USH00026250        -35.9439        -1.3617
## USH00026353        -31.4920        -3.5808
## USH00026796        -34.0864        -0.9458
## USH00027281        -32.8050        -1.8433
## USH00027370        -33.3959        -2.4364
## USH00027390        -31.3350        -2.7014
## USH00027435        -31.0570        -0.9992
## USH00027716        -34.5339        -0.1842
## USH00028619        -31.7111        -3.8108
## USH00028815        -32.6078        -3.2872
## USH00029271        -31.6375        -1.6995
## USH00029287        -34.3945        -1.5372
## USH00029359        -33.8445        -0.2758
## USH00029652        -36.2892        -2.9050
## USH00030936        -12.8695        -0.6342
## USH00031596        -14.0831        -0.4322
## USH00031632        -12.2400         0.9033
## USH00032356        -15.4459         0.9000
## USH00032444        -15.8286         0.5842
## USH00032930        -16.1023         0.9097
## USH00034572        -13.1892         0.9783
## USH00034756        -15.9036        -0.9433
## USH00035186        -12.9286         0.0878
## USH00035512        -15.5225        -0.0039
## USH00035754        -13.6731        -1.2908
## USH00035820        -12.6223         0.7475
## USH00035908        -15.0420        -1.6961
## USH00036253        -12.9245        -1.7064
## USH00036928        -15.2911        -0.2136
## USH00040693        -43.9131         2.3580
## USH00040924        -36.2514        -1.9033
## USH00041048        -37.2123        -2.5620
## USH00041614        -41.8278         6.0172
## USH00041715        -43.4753         4.1747
## USH00041758        -38.7400        -2.8764
## USH00041912        -42.6023         3.5747
## USH00042239        -38.2414        -2.5267
## USH00042294        -43.4303         3.0186
## USH00042319        -38.5211         0.9458
## USH00042728        -42.3248         2.8142
## USH00042910        -45.8145         5.2933
## USH00042941        -40.0817        -0.8122
## USH00043161        -45.4109         3.9928
## USH00043257        -41.3736         1.2636
## USH00043747        -41.2898         0.8055
## USH00043761        -45.0300         6.2878
## USH00043875        -44.5273         3.1011
## USH00044232        -39.8578         1.2817
## USH00044259        -37.8695        -1.8078
## USH00044713        -42.2934         3.8019
## USH00044890        -40.6806         0.8653
## USH00044997        -43.4234         2.1758
## USH00045032        -42.9420         2.5897
## USH00045385        -43.2395         3.6294
## USH00045532        -42.1659         1.7694
## USH00045983        -43.9623         5.8042
## USH00046074        -43.9189         2.7614
## USH00046118        -36.2731        -0.7489
## USH00046175        -39.5345        -1.9139
## USH00046399        -40.8817        -1.0686
## USH00046506        -43.8539         4.2294
## USH00046508        -45.1859         5.7925
## USH00046719        -39.7989        -1.3681
## USH00046730        -42.3398         0.1114
## USH00046826        -44.2620         2.7414
## USH00047195        -42.6017         4.4203
## USH00047304        -43.9528         5.0011
## USH00047306        -38.8436        -1.4636
## USH00047851        -42.3181        -0.2108
## USH00047902        -41.3386        -1.0997
## USH00047916        -43.6453         1.4742
## USH00047965        -44.3520         2.9217
## USH00048702        -42.3173         4.9003
## USH00048758        -41.7970         3.6514
## USH00048839        -40.4039        -0.4931
## USH00049087        -39.4081        -1.8139
## USH00049122        -44.8645         3.6303
## USH00049200        -43.6150         2.8792
## USH00049452        -41.0073         0.0811
## USH00049490        -44.5873         5.2058
## USH00049699        -43.9600         4.0067
## USH00049855        -41.2439         2.2336
## USH00049866        -44.2950         6.1872
## USH00050848        -26.9209         4.4755
## USH00051294        -26.8798         2.9436
## USH00051528        -26.9325         3.7039
## USH00051564        -24.0028         3.3072
## USH00051741        -29.6173         3.7261
## USH00052184        -27.9789         2.1578
## USH00052281        -27.6895         4.1097
## USH00052446        -24.4350         2.9611
## USH00053005        -26.7856         5.0983
## USH00053038        -25.4698         4.7436
## USH00053146        -30.3873         3.6489
## USH00053662        -28.6217         3.0094
## USH00053951        -28.7639         2.2553
## USH00054076        -23.7778         2.5330
## USH00054770        -24.2848         2.5772
## USH00054834        -24.8695         2.5472
## USH00055322        -27.5934         1.6578
## USH00055722        -29.5334         2.9694
## USH00057167        -25.3475         2.5228
## USH00057337        -27.7986         2.5694
## USH00057936        -28.4775         4.9719
## USH00058204        -29.5275         2.4328
## USH00058429        -26.1411         1.6622
## USH00059243        -23.8731         4.5419
## USH00062658          4.9791         6.4336
## USH00063207          6.3064         5.8342
## USH00067970          4.7983         5.6083
## USH00068138          6.1175         6.2786
## USH00072730          2.8291         3.7419
## USH00073595          2.7697         3.2997
## USH00075915          2.9208         3.3819
## USH00076410          2.5944         4.1530
## USH00079605          2.8044         4.2575
## USH00080211         -6.6748        -5.7906
## USH00080228         -3.5281        -8.2983
## USH00080478         -3.4975        -7.6178
## USH00080611         -2.3253        -8.8236
## USH00082220         -7.7481        -4.7920
## USH00082850         -3.0439        -9.6675
## USH00082915         -3.1931        -5.7614
## USH00082944         -3.1178        -4.8575
## USH00083163         -1.8553        -9.4145
## USH00083186         -3.5156        -8.9314
## USH00083207         -2.0081        -8.0542
## USH00084289         -3.9667        -6.7133
## USH00084570         -3.4064       -10.9614
## USH00084731         -4.2484        -5.3311
## USH00085275         -5.0661        -5.0647
## USH00086414         -3.7320        -6.4361
## USH00086997         -8.8411        -5.0383
## USH00087020         -2.0903        -9.9345
## USH00087851         -3.9142        -7.1786
## USH00088758         -6.0075        -5.1233
## USH00088824         -4.4186        -7.3578
## USH00088942         -2.4700        -6.8922
## USH00090140         -5.8031        -3.9825
## USH00090586         -6.2717        -4.6936
## USH00091340         -3.1564        -4.3483
## USH00091500         -5.8578        -4.3261
## USH00092318         -5.4978        -1.9192
## USH00092475         -5.6442        -0.9872
## USH00092966         -4.8600        -3.3161
## USH00093621         -5.5142        -1.2158
## USH00093754         -3.6064        -3.5283
## USH00094170         -5.1223        -2.2322
## USH00095874         -4.9039        -2.4333
## USH00095882         -3.6214        -2.6461
## USH00096335         -6.4720        -2.0620
## USH00097276         -5.2234        -4.7328
## USH00097600         -6.8056        -1.2711
## USH00097847         -2.8642        -3.3864
## USH00098535         -6.1739        -2.8289
## USH00098703         -5.1309        -4.0703
## USH00098740         -4.9861        -0.9378
## USH00099141         -4.2764        -2.1136
## USH00099157         -4.3600        -1.7900
## USH00099186         -3.9670        -4.2650
## USH00099291         -6.8434        -2.6470
## USH00100010        -34.4795         7.4372
## USH00100448        -37.5778         8.0772
## USH00100470        -32.9281         8.5261
## USH00100803        -33.0392         6.8189
## USH00101408        -38.3295         9.0569
## USH00101956        -38.4559        12.1625
## USH00102845        -37.9759        10.9858
## USH00103143        -37.1898        10.5767
## USH00103631        -36.9773         7.4239
## USH00103732        -33.3817         7.0708
## USH00104140        -35.7920         7.0808
## USH00104295        -36.2281         6.8364
## USH00104670        -36.1734         7.2161
##             sum_lat_long
## USH00011084     -13.1672
## USH00012813     -14.5047
## USH00013160     -12.4701
## USH00013511     -12.0497
## USH00013816     -11.5548
## USH00015749     -10.0261
## USH00017157      -9.8103
## USH00017304      -8.5506
## USH00017366     -11.7759
## USH00018024      -9.8892
## USH00018178     -13.5128
## USH00018323     -11.3353
## USH00018380     -11.5748
## USH00018438     -10.9028
## USH00018469      -8.2167
## USH00020080     -37.6609
## USH00021026     -36.3773
## USH00021248     -30.5567
## USH00021514     -35.6467
## USH00021614     -34.5193
## USH00023160     -33.6453
## USH00023596     -33.2681
## USH00024089     -32.4156
## USH00024645     -35.9873
## USH00024849     -31.9084
## USH00025512     -34.6362
## USH00026250     -37.3056
## USH00026353     -35.0728
## USH00026796     -35.0322
## USH00027281     -34.6483
## USH00027370     -35.8323
## USH00027390     -34.0364
## USH00027435     -32.0562
## USH00027716     -34.7181
## USH00028619     -35.5219
## USH00028815     -35.8950
## USH00029271     -33.3370
## USH00029287     -35.9317
## USH00029359     -34.1203
## USH00029652     -39.1942
## USH00030936     -13.5037
## USH00031596     -14.5153
## USH00031632     -11.3367
## USH00032356     -14.5459
## USH00032444     -15.2444
## USH00032930     -15.1926
## USH00034572     -12.2109
## USH00034756     -16.8469
## USH00035186     -12.8408
## USH00035512     -15.5264
## USH00035754     -14.9639
## USH00035820     -11.8748
## USH00035908     -16.7381
## USH00036253     -14.6309
## USH00036928     -15.5047
## USH00040693     -41.5551
## USH00040924     -38.1547
## USH00041048     -39.7743
## USH00041614     -35.8106
## USH00041715     -39.3006
## USH00041758     -41.6164
## USH00041912     -39.0276
## USH00042239     -40.7681
## USH00042294     -40.4117
## USH00042319     -37.5753
## USH00042728     -39.5106
## USH00042910     -40.5212
## USH00042941     -40.8939
## USH00043161     -41.4181
## USH00043257     -40.1100
## USH00043747     -40.4843
## USH00043761     -38.7422
## USH00043875     -41.4262
## USH00044232     -38.5761
## USH00044259     -39.6773
## USH00044713     -38.4915
## USH00044890     -39.8153
## USH00044997     -41.2476
## USH00045032     -40.3523
## USH00045385     -39.6101
## USH00045532     -40.3965
## USH00045983     -38.1581
## USH00046074     -41.1575
## USH00046118     -37.0220
## USH00046175     -41.4484
## USH00046399     -41.9503
## USH00046506     -39.6245
## USH00046508     -39.3934
## USH00046719     -41.1670
## USH00046730     -42.2284
## USH00046826     -41.5206
## USH00047195     -38.1814
## USH00047304     -38.9517
## USH00047306     -40.3072
## USH00047851     -42.5289
## USH00047902     -42.4383
## USH00047916     -42.1711
## USH00047965     -41.4303
## USH00048702     -37.4170
## USH00048758     -38.1456
## USH00048839     -40.8970
## USH00049087     -41.2220
## USH00049122     -41.2342
## USH00049200     -40.7358
## USH00049452     -40.9262
## USH00049490     -39.3815
## USH00049699     -39.9533
## USH00049855     -39.0103
## USH00049866     -38.1078
## USH00050848     -22.4454
## USH00051294     -23.9362
## USH00051528     -23.2286
## USH00051564     -20.6956
## USH00051741     -25.8912
## USH00052184     -25.8211
## USH00052281     -23.5798
## USH00052446     -21.4739
## USH00053005     -21.6873
## USH00053038     -20.7262
## USH00053146     -26.7384
## USH00053662     -25.6123
## USH00053951     -26.5086
## USH00054076     -21.2448
## USH00054770     -21.7076
## USH00054834     -22.3223
## USH00055322     -25.9356
## USH00055722     -26.5640
## USH00057167     -22.8247
## USH00057337     -25.2292
## USH00057936     -23.5056
## USH00058204     -27.0947
## USH00058429     -24.4789
## USH00059243     -19.3312
## USH00062658      11.4127
## USH00063207      12.1406
## USH00067970      10.4066
## USH00068138      12.3961
## USH00072730       6.5710
## USH00073595       6.0694
## USH00075915       6.3027
## USH00076410       6.7474
## USH00079605       7.0619
## USH00080211     -12.4654
## USH00080228     -11.8264
## USH00080478     -11.1153
## USH00080611     -11.1489
## USH00082220     -12.5401
## USH00082850     -12.7114
## USH00082915      -8.9545
## USH00082944      -7.9753
## USH00083163     -11.2698
## USH00083186     -12.4470
## USH00083207     -10.0623
## USH00084289     -10.6800
## USH00084570     -14.3678
## USH00084731      -9.5795
## USH00085275     -10.1308
## USH00086414     -10.1681
## USH00086997     -13.8794
## USH00087020     -12.0248
## USH00087851     -11.0928
## USH00088758     -11.1308
## USH00088824     -11.7764
## USH00088942      -9.3622
## USH00090140      -9.7856
## USH00090586     -10.9653
## USH00091340      -7.5047
## USH00091500     -10.1839
## USH00092318      -7.4170
## USH00092475      -6.6314
## USH00092966      -8.1761
## USH00093621      -6.7300
## USH00093754      -7.1347
## USH00094170      -7.3545
## USH00095874      -7.3372
## USH00095882      -6.2675
## USH00096335      -8.5340
## USH00097276      -9.9562
## USH00097600      -8.0767
## USH00097847      -6.2506
## USH00098535      -9.0028
## USH00098703      -9.2012
## USH00098740      -5.9239
## USH00099141      -6.3900
## USH00099157      -6.1500
## USH00099186      -8.2320
## USH00099291      -9.4904
## USH00100010     -27.0423
## USH00100448     -29.5006
## USH00100470     -24.4020
## USH00100803     -26.2203
## USH00101408     -29.2726
## USH00101956     -26.2934
## USH00102845     -26.9901
## USH00103143     -26.6131
## USH00103631     -29.5534
## USH00103732     -26.3109
## USH00104140     -28.7112
## USH00104295     -29.3917
## USH00104670     -28.9573
##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 1018 rows ]</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="pca-on-weather-data-example.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">#closest &lt;- which(min(station$longitude + station$latitude))</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="principal-component-analysis-applied.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="comparing-different-models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/06-linear_model_wrapup_weather.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/06-linear_model_wrapup_weather.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
