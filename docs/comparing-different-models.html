<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Comparing different models | Data Mining</title>
  <meta name="description" content="Chapter 6 Comparing different models | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Comparing different models | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Comparing different models | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-03-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pca-on-weather-data-example.html"/>
<link rel="next" href="tidyverse-tools.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>2</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>3</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>3.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>3.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="3.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>3.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>4.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>4.1.1</b> Other example</a></li>
<li class="chapter" data-level="4.1.2" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#fishing-out-various-titles"><i class="fa fa-check"></i><b>4.1.2</b> Fishing out various titles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html"><i class="fa fa-check"></i><b>5</b> PCA on weather data example</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#different-noramlizations"><i class="fa fa-check"></i><b>5.1</b> Different noramlizations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#no-normalization"><i class="fa fa-check"></i><b>5.1.1</b> No normalization</a></li>
<li class="chapter" data-level="5.1.2" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.1.2</b> Centering and scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="comparing-different-models.html"><a href="comparing-different-models.html"><i class="fa fa-check"></i><b>6</b> Comparing different models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-0"><i class="fa fa-check"></i><b>6.1</b> Question 0</a></li>
<li class="chapter" data-level="6.2" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-1"><i class="fa fa-check"></i><b>6.2</b> Question 1</a></li>
<li class="chapter" data-level="6.3" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-2"><i class="fa fa-check"></i><b>6.3</b> Question 2</a></li>
<li class="chapter" data-level="6.4" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-3"><i class="fa fa-check"></i><b>6.4</b> Question 3</a></li>
<li class="chapter" data-level="6.5" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-4"><i class="fa fa-check"></i><b>6.5</b> Question 4</a></li>
<li class="chapter" data-level="6.6" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-5"><i class="fa fa-check"></i><b>6.6</b> Question 5</a></li>
<li class="chapter" data-level="6.7" data-path="comparing-different-models.html"><a href="comparing-different-models.html#question-6"><i class="fa fa-check"></i><b>6.7</b> Question 6</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html"><i class="fa fa-check"></i><b>7</b> Tidyverse tools</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#select"><i class="fa fa-check"></i><b>7.1</b> Select</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#original-data-set"><i class="fa fa-check"></i><b>7.1.1</b> Original Data Set</a></li>
<li class="chapter" data-level="7.1.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#other-select-functions"><i class="fa fa-check"></i><b>7.1.2</b> Other select functions:</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#filter"><i class="fa fa-check"></i><b>7.2</b> Filter</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#logical-tests-in-r"><i class="fa fa-check"></i><b>7.2.1</b> Logical Tests in R</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#mutate"><i class="fa fa-check"></i><b>7.3</b> Mutate</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-mutate-functions"><i class="fa fa-check"></i><b>7.3.1</b> Useful mutate functions:</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#summarise-summarize"><i class="fa fa-check"></i><b>7.4</b> Summarise / Summarize</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-summary-functions"><i class="fa fa-check"></i><b>7.4.1</b> Useful summary functions</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#arrange"><i class="fa fa-check"></i><b>7.5</b> Arrange()</a></li>
<li class="chapter" data-level="7.6" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#group_by"><i class="fa fa-check"></i><b>7.6</b> Group_by()</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="comparing-different-models" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Comparing different models</h1>
<p>This homework is to meant for you practice some feature engineering with the
different regression models.</p>
<p>Context: the US is increasingly polarized and <a href="https://twitter.com/home">Twitter</a>, a social
media platform, is providing the space for people to voice their opinions or find like-minded
individuals. In this assignment, we will use Twitter data <code>non_retweets_dc_inaug_steal.csv</code> on CourseWorks
that has contains the token frequencies. This has been processed somewhat to minimize the data size.
The non-token variables are <code>created_at</code>, <code>like_count</code>, <code>reply_count</code>, <code>retweet_count</code>, <code>tweet_body</code>.</p>
<p>Please <strong>re-download</strong> this dataset given there were issues with the version given in class.</p>
<p>The tweets are collected overtime with the query words “steal”, “inaguration”, and “washington dc” using
Twitter’s <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-recent">Recent Search API</a>.
Calls were made once a day around midnight and there is a limit on the number of queries that
can be made freely.</p>
<div id="question-0" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Question 0</h2>
<p>What dates do the tweets cover? Please visualize the temporal distribution of the tweets
with the intent to understand where most Tweets in the dataset came from in time.</p>
</div>
<div id="question-1" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Question 1</h2>
<p>Please combine all the token frequencies that contain the string <code>inaug</code> into a single column.
You should remove the redundant tokens after this summarization. Please select the method
of “combining” that is consistent with the “token frequency” concept.</p>
<p>Please report the fraction of records that have non-zero frequencies for this new column.</p>
</div>
<div id="question-2" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Question 2</h2>
<p>We want to discover the topics correlated with the inauguration over time. To achieve this,
please model your new column from Question 1 against all other tokens (i.e. exclude the non-token variables)
using the following models. This is <strong>time-consuming</strong>! You should use <code>Sys.time()</code> to have a realistic expectation of how long each model will take.</p>
<p>Please plot the MSE from a 5-fold cross validation to compare the prediction accuracy between
- OLS
- Please ignore the rank deficient warning, this is a warning of high-collinearity
that is common with high dimensional data and why OLS shouldn’t do well.
- stepwise regression using AIC as the objective</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="comparing-different-models.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ols = lm(y ~ ., df)</span></span>
<span id="cb87-2"><a href="comparing-different-models.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ols_summ = summary(ols)$coefficients</span></span>
<span id="cb87-3"><a href="comparing-different-models.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co"># okay_features = rownames(ols_summ)[ols_summ[, 4] &lt; 0.05]</span></span>
<span id="cb87-4"><a href="comparing-different-models.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co"># init_formula = paste(&#39;y ~&#39;, paste(okay_features, collapse=&#39;+&#39;))</span></span>
<span id="cb87-5"><a href="comparing-different-models.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># init_mod = lm(init_fomrula, df)</span></span>
<span id="cb87-6"><a href="comparing-different-models.html#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # &quot;~.&quot; sets the upper model for the `scope` as using all of the features</span></span>
<span id="cb87-7"><a href="comparing-different-models.html#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># step_mod &lt;- step(init_mod, &quot;~.&quot;)</span></span></code></pre></div>
<ul>
<li>Lasso corresponding to <span class="math display">\[\lambda\]</span>=<code>lambda.min</code> from cv.glmnet
<ul>
<li>hint: <a href="https://www.rdocumentation.org/packages/glmnet/versions/4.1/topics/predict.cv.glmnet">predict.cv.glmnet</a></li>
<li>hint: you may want to convert the training X matrix into sparse matrices, i.e. <code>Matrix(as.matrix(df_sans_y), sparse=TRUE)</code>
to speed things up. This essentially avoids many multiplications when a 0 is involved.</li>
</ul></li>
<li>Ridge regression corresponding to <span class="math display">\[\lambda\]</span>=<code>lambda.min</code> from cv.glmnet</li>
</ul>
<p>Please <strong>do not</strong> normalize your features for this problem but use the raw frequencies.</p>
<p>hint, adding some print statements can help with unnecessary panics:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="comparing-different-models.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(caret)</span></span>
<span id="cb88-2"><a href="comparing-different-models.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co"># test_folds &lt;- createFolds(DEP_VARIABLE, k=5)</span></span>
<span id="cb88-3"><a href="comparing-different-models.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for(i in seq_along(test_folds)){</span></span>
<span id="cb88-4"><a href="comparing-different-models.html#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb88-5"><a href="comparing-different-models.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     # Some code that isolates the test/train data!</span></span>
<span id="cb88-6"><a href="comparing-different-models.html#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     </span></span>
<span id="cb88-7"><a href="comparing-different-models.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     print(paste(&quot;cross validation fold&quot;, i))</span></span>
<span id="cb88-8"><a href="comparing-different-models.html#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="co">#     t0 &lt;- Sys.time()</span></span>
<span id="cb88-9"><a href="comparing-different-models.html#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     ols &lt;- lm(TRAIN_DEP_VARIABLE ~ TRAIN_INDEP_VARIABLE)</span></span>
<span id="cb88-10"><a href="comparing-different-models.html#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     print(paste(&#39;running OLS took&#39;, Sys.time() - t0))</span></span>
<span id="cb88-11"><a href="comparing-different-models.html#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     }</span></span></code></pre></div>
<p>Side comment:
- You may want to see how the <code>lambda.1se</code> compares.
- (personal observation) Normalizing the features does help with the optimization but our features are
all token frequencies so it’s not as big of a concern.</p>
</div>
<div id="question-3" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Question 3</h2>
<p>For the algorithm that performed the best, please retrain the model with the following requirements:
- Use all of the data, i.e. do not reserve data for test/train.
- You may need to normalize the features. If Lasso/Ridge was best, note that sparsity will not hold after
you normalize.</p>
<p>Please plot the distribution of the coefficients.</p>
</div>
<div id="question-4" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Question 4</h2>
<p>Please list out the top tokens corresponding to the strongest non-zero coefficients.</p>
<p>Side comment: If you are not an American, what do these tokens and their coefficients
suggest about the inauguration?</p>
</div>
<div id="question-5" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Question 5</h2>
<p>Please write a function that represents the objective function for Ridge regression, i.e. your function should take in a vector of coefficients, a matrix X, and a vector Y and return a real number.
- Please make sure you fit an intercept within the function but do not include the intercept in your regularization term for the objective.
- Please add an additional argument called <code>shrink_target</code> that allows us to change the shrinkage of the coefficients to arbitrary vector.
- Please make sure you set the default for this argument to align with the usual Ridge regression.</p>
</div>
<div id="question-6" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Question 6</h2>
<p>Please perform PCA on the token frequencies without normalizing.
- Plot the eigenvalues in order (not the cumulative eigenvalues) of their magnitude, how many components might have interesting features. There are many correct answers but also many wrong answers here depending on your plot.
- Analyze the loadings from the first 2 components, do they seem meaningful to you given the dataset?
- if yes, what key tokens are associated with these 2 components and why do they carry meaning?
- if no, how could you modify the token frequencies to get more meaningful principle components?</p>
<p>Side comment (things to think about):
- what would you do after identifying the components?
- again, if you were not involved in American politics, how would you have done some of these steps?
- Twitter data is not like normal language, e.g. people do not use complete sentences. How might this look if we had journal articles?</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pca-on-weather-data-example.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidyverse-tools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/07-comparing_different_models.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/07-comparing_different_models.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
