<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Principal Component Analysis | Data Mining</title>
  <meta name="description" content="Chapter 4 Principal Component Analysis | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Principal Component Analysis | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Principal Component Analysis | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="a-caucus-race-and-a-long-tale.html"/>
<link rel="next" href="principal-component-analysis-applied.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="the-pool-of-tears.html"><a href="the-pool-of-tears.html"><i class="fa fa-check"></i><b>2</b> The pool of tears</a></li>
<li class="chapter" data-level="3" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>3</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>4.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="4.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>4.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="4.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>4.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>5</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="5.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>5.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>5.1.1</b> Other example</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="principal-component-analysis" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Principal Component Analysis</h1>
<div id="principle-component-analysis" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Principle Component Analysis</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="principal-component-analysis.html#cb1-1" aria-hidden="true" tabindex="-1"></a>hidden_p <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-2"><a href="principal-component-analysis.html#cb1-2" aria-hidden="true" tabindex="-1"></a>observ_p <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb1-3"><a href="principal-component-analysis.html#cb1-3" aria-hidden="true" tabindex="-1"></a>prob <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># runif(hidden_p)</span></span>
<span id="cb1-4"><a href="principal-component-analysis.html#cb1-4" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sample</span>(hidden_p,   <span class="co">#hidden to observed</span></span>
<span id="cb1-5"><a href="principal-component-analysis.html#cb1-5" aria-hidden="true" tabindex="-1"></a>              observ_p,</span>
<span id="cb1-6"><a href="principal-component-analysis.html#cb1-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">replace=</span><span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="principal-component-analysis.html#cb1-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">prob=</span>prob)</span>
<span id="cb1-8"><a href="principal-component-analysis.html#cb1-8" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sort</span>(h2o)</span>
<span id="cb1-9"><a href="principal-component-analysis.html#cb1-9" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb1-10"><a href="principal-component-analysis.html#cb1-10" aria-hidden="true" tabindex="-1"></a>hidden_z <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb1-11"><a href="principal-component-analysis.html#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">seq_len</span>(hidden_p),</span>
<span id="cb1-12"><a href="principal-component-analysis.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">rnorm</span>(sample_size))</span>
<span id="cb1-13"><a href="principal-component-analysis.html#cb1-13" aria-hidden="true" tabindex="-1"></a>corrs <span class="ot">&lt;-</span> <span class="fu">runif</span>(observ_p, <span class="fl">0.3</span>, <span class="fl">0.8</span>)</span>
<span id="cb1-14"><a href="principal-component-analysis.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="principal-component-analysis.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#create five groups of colinear stuff</span></span>
<span id="cb1-16"><a href="principal-component-analysis.html#cb1-16" aria-hidden="true" tabindex="-1"></a>observ_x <span class="ot">&lt;-</span> <span class="fu">mapply</span>(</span>
<span id="cb1-17"><a href="principal-component-analysis.html#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(i, corr) {</span>
<span id="cb1-18"><a href="principal-component-analysis.html#cb1-18" aria-hidden="true" tabindex="-1"></a>  hidden_z[, i] <span class="sc">*</span> corr <span class="sc">+</span> <span class="fu">rnorm</span>(sample_size) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> corr) <span class="sc">*</span><span class="dv">100</span></span>
<span id="cb1-19"><a href="principal-component-analysis.html#cb1-19" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb1-20"><a href="principal-component-analysis.html#cb1-20" aria-hidden="true" tabindex="-1"></a>  h2o, corrs)</span>
<span id="cb1-21"><a href="principal-component-analysis.html#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="principal-component-analysis.html#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#observ_x is what you often see, but there is still hidden stuff</span></span>
<span id="cb1-23"><a href="principal-component-analysis.html#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="principal-component-analysis.html#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="fu">cor</span>(observ_x))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="principal-component-analysis.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This looks weird to what we expect. It doesn&#39;t look like five groups</span></span>
<span id="cb2-2"><a href="principal-component-analysis.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#if we sort instead it works</span></span>
<span id="cb2-3"><a href="principal-component-analysis.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="principal-component-analysis.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="principal-component-analysis.html#cb2-5" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sample</span>(hidden_p,   <span class="co">#hidden to observed</span></span>
<span id="cb2-6"><a href="principal-component-analysis.html#cb2-6" aria-hidden="true" tabindex="-1"></a>              observ_p,</span>
<span id="cb2-7"><a href="principal-component-analysis.html#cb2-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">replace=</span><span class="cn">TRUE</span>,</span>
<span id="cb2-8"><a href="principal-component-analysis.html#cb2-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">prob=</span>prob)</span>
<span id="cb2-9"><a href="principal-component-analysis.html#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="principal-component-analysis.html#cb2-10" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb2-11"><a href="principal-component-analysis.html#cb2-11" aria-hidden="true" tabindex="-1"></a>hidden_z <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb2-12"><a href="principal-component-analysis.html#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">seq_len</span>(hidden_p),</span>
<span id="cb2-13"><a href="principal-component-analysis.html#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">rnorm</span>(sample_size))</span>
<span id="cb2-14"><a href="principal-component-analysis.html#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="principal-component-analysis.html#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#This effects how things are correlated!</span></span>
<span id="cb2-16"><a href="principal-component-analysis.html#cb2-16" aria-hidden="true" tabindex="-1"></a>corrs <span class="ot">&lt;-</span> <span class="fu">runif</span>(observ_p, <span class="fl">0.3</span>, <span class="fl">0.8</span>)</span>
<span id="cb2-17"><a href="principal-component-analysis.html#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="principal-component-analysis.html#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#create five groups of colinear stuff</span></span>
<span id="cb2-19"><a href="principal-component-analysis.html#cb2-19" aria-hidden="true" tabindex="-1"></a>observ_x <span class="ot">&lt;-</span> <span class="fu">mapply</span>(</span>
<span id="cb2-20"><a href="principal-component-analysis.html#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(i, corr) {</span>
<span id="cb2-21"><a href="principal-component-analysis.html#cb2-21" aria-hidden="true" tabindex="-1"></a>  hidden_z[, i] <span class="sc">*</span> corr <span class="sc">+</span> <span class="fu">rnorm</span>(sample_size) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> corr)</span>
<span id="cb2-22"><a href="principal-component-analysis.html#cb2-22" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb2-23"><a href="principal-component-analysis.html#cb2-23" aria-hidden="true" tabindex="-1"></a>  h2o, corrs)</span>
<span id="cb2-24"><a href="principal-component-analysis.html#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="principal-component-analysis.html#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#observ_x is what you often see, but there is still hidden stuff</span></span>
<span id="cb2-26"><a href="principal-component-analysis.html#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="principal-component-analysis.html#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="fu">cor</span>(observ_x))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="principal-component-analysis.html#cb3-1" aria-hidden="true" tabindex="-1"></a>beta <span class="ot">&lt;-</span> <span class="fu">runif</span>(hidden_p, <span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb3-2"><a href="principal-component-analysis.html#cb3-2" aria-hidden="true" tabindex="-1"></a>noise <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">sd=</span><span class="dv">10</span>)</span>
<span id="cb3-3"><a href="principal-component-analysis.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#hard to measure hidden forces!</span></span>
<span id="cb3-4"><a href="principal-component-analysis.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#we can only measure x, but x is only correlated to hidden stuff</span></span>
<span id="cb3-5"><a href="principal-component-analysis.html#cb3-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> hidden_z <span class="sc">%*%</span> beta <span class="sc">+</span> noise</span>
<span id="cb3-6"><a href="principal-component-analysis.html#cb3-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(y, observ_x)</span>
<span id="cb3-7"><a href="principal-component-analysis.html#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="principal-component-analysis.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#y depends on the hidden stuff not x</span></span></code></pre></div>
<p>Maybe there is a hidden gene inside of you that makes you sick. We canâ€™t (yet) measure that hidden gene. But we can measure symptoms and things like your heart rate. This should be correlated.</p>
</div>
<div id="typical-machine-learning-approach" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Typical machine learning approach</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="principal-component-analysis.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#training data set, first 800 points (80 percent)</span></span>
<span id="cb4-2"><a href="principal-component-analysis.html#cb4-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">800</span></span>
<span id="cb4-3"><a href="principal-component-analysis.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="principal-component-analysis.html#cb4-4" aria-hidden="true" tabindex="-1"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., df, <span class="at">subset=</span>train)</span>
<span id="cb4-5"><a href="principal-component-analysis.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ols<span class="sc">$</span>residual) <span class="co">#correct length</span></span></code></pre></div>
<pre><code>## [1] 800</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="principal-component-analysis.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predict on points we didn&#39;t use to train</span></span>
<span id="cb6-2"><a href="principal-component-analysis.html#cb6-2" aria-hidden="true" tabindex="-1"></a>ols_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(ols, df[<span class="sc">-</span>train,])</span>
<span id="cb6-3"><a href="principal-component-analysis.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="principal-component-analysis.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#error: differrence between measured values against predict. Mean of this squared MSE!</span></span>
<span id="cb6-5"><a href="principal-component-analysis.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((df<span class="sc">$</span>y[<span class="sc">-</span>train] <span class="sc">-</span> ols_pred)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 106.8317</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="principal-component-analysis.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#run ols </span></span>
<span id="cb8-2"><a href="principal-component-analysis.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="principal-component-analysis.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#PCA TIME</span></span>
<span id="cb8-4"><a href="principal-component-analysis.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#only input X, (feature matrix) into the PCA function</span></span>
<span id="cb8-5"><a href="principal-component-analysis.html#cb8-5" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(observ_x, <span class="at">scale=</span><span class="cn">FALSE</span>)</span>
<span id="cb8-6"><a href="principal-component-analysis.html#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="principal-component-analysis.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#scale is used because Xs might not be in the same unit, so mean = 0, sd = 1</span></span>
<span id="cb8-8"><a href="principal-component-analysis.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pr_out)</span></code></pre></div>
<pre><code>## [1] &quot;prcomp&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="principal-component-analysis.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#it has its own class</span></span>
<span id="cb10-2"><a href="principal-component-analysis.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pr_out)</span></code></pre></div>
<pre><code>## [1] &quot;sdev&quot;     &quot;rotation&quot; &quot;center&quot;   &quot;scale&quot;    &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="principal-component-analysis.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#squared value of sdev is eigenvalue</span></span>
<span id="cb12-2"><a href="principal-component-analysis.html#cb12-2" aria-hidden="true" tabindex="-1"></a>eigen_val <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span> </span>
<span id="cb12-3"><a href="principal-component-analysis.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="principal-component-analysis.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#cumulative sum as a fraction of total eigenvalues</span></span>
<span id="cb12-5"><a href="principal-component-analysis.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">cumsum</span>(eigen_val) <span class="sc">/</span> <span class="fu">sum</span>(eigen_val))</span>
<span id="cb12-6"><a href="principal-component-analysis.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span>.<span class="dv">9</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="principal-component-analysis.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#here after the 5th point, the slope tapers off! This is directly related to the hidden_p value at the beginning. It should help show you how many important hidden features there are. </span></span>
<span id="cb13-2"><a href="principal-component-analysis.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="principal-component-analysis.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#it is the percent of variabilitiy caputured by the first k components</span></span>
<span id="cb13-4"><a href="principal-component-analysis.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="principal-component-analysis.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#If you don&#39;t know what to choose, 90% variability is a good point </span></span>
<span id="cb13-6"><a href="principal-component-analysis.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="principal-component-analysis.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="principal-component-analysis.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>sdev)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="principal-component-analysis.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Very similar, but not as interpretable as percent of variability. </span></span>
<span id="cb14-2"><a href="principal-component-analysis.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="principal-component-analysis.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#These steps is how k is chosen.</span></span>
<span id="cb14-4"><a href="principal-component-analysis.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="principal-component-analysis.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#K is the dimension of W. Data came n x p. We need to shrink it to k. If you don&#39;t have</span></span>
<span id="cb14-6"><a href="principal-component-analysis.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#a clear cut, use 90%</span></span>
<span id="cb14-7"><a href="principal-component-analysis.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="principal-component-analysis.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#we don&#39;t want to keep all the variability because not all features provide useful</span></span>
<span id="cb14-9"><a href="principal-component-analysis.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#information. Some of them are so colinear, they just add noise. </span></span>
<span id="cb14-10"><a href="principal-component-analysis.html#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="principal-component-analysis.html#cb14-11" aria-hidden="true" tabindex="-1"></a>cutoff <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb14-12"><a href="principal-component-analysis.html#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="principal-component-analysis.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#now we are looking at x</span></span>
<span id="cb14-14"><a href="principal-component-analysis.html#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="principal-component-analysis.html#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#only pull out first k columns</span></span>
<span id="cb14-16"><a href="principal-component-analysis.html#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="principal-component-analysis.html#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pr_out<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] 1000   30</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="principal-component-analysis.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(observ_x)</span></code></pre></div>
<pre><code>## [1] 1000   30</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="principal-component-analysis.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#these will be the same, but we choose a cutoff. </span></span>
<span id="cb18-2"><a href="principal-component-analysis.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="principal-component-analysis.html#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="principal-component-analysis.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="principal-component-analysis.html#cb18-5" aria-hidden="true" tabindex="-1"></a>W <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>x[, <span class="dv">1</span><span class="sc">:</span>cutoff]</span>
<span id="cb18-6"><a href="principal-component-analysis.html#cb18-6" aria-hidden="true" tabindex="-1"></a>df_w <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(y, W)</span>
<span id="cb18-7"><a href="principal-component-analysis.html#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="principal-component-analysis.html#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="principal-component-analysis.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#PCA doesn&#39;t have to be lm. It could be ridge or lasso too</span></span>
<span id="cb18-10"><a href="principal-component-analysis.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#should be like the ols from above</span></span>
<span id="cb18-11"><a href="principal-component-analysis.html#cb18-11" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., df_w, <span class="at">subset=</span>train)</span>
<span id="cb18-12"><a href="principal-component-analysis.html#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#same prediction</span></span>
<span id="cb18-13"><a href="principal-component-analysis.html#cb18-13" aria-hidden="true" tabindex="-1"></a>pca_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(pca, df_w[<span class="sc">-</span>train,])</span>
<span id="cb18-14"><a href="principal-component-analysis.html#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="principal-component-analysis.html#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">#prediction error</span></span>
<span id="cb18-16"><a href="principal-component-analysis.html#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((df_w<span class="sc">$</span>y[<span class="sc">-</span>train] <span class="sc">-</span> pca_pred)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 111.2506</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="principal-component-analysis.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#that was the classic view of PCA </span></span></code></pre></div>
</div>
<div id="what-we-would-do-in-data-mining" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> What we would do in data mining</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="principal-component-analysis.html#cb21-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb21-2"><a href="principal-component-analysis.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>rotation[,k])</span>
<span id="cb21-3"><a href="principal-component-analysis.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="principal-component-analysis.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">abs</span>(pr_out<span class="sc">$</span>rotation[, k]) <span class="sc">&gt;</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## [1]  4  7  9 11 17 18 21 22 29</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="principal-component-analysis.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#what is the truth we should be comparing to?</span></span>
<span id="cb24-2"><a href="principal-component-analysis.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="principal-component-analysis.html#cb24-3" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(observ_x)</span>
<span id="cb24-4"><a href="principal-component-analysis.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="principal-component-analysis.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="principal-component-analysis.html#cb24-6" aria-hidden="true" tabindex="-1"></a>test_x <span class="ot">&lt;-</span> <span class="fu">scale</span>(observ_x, <span class="at">scale =</span> <span class="cn">FALSE</span>) <span class="sc">%*%</span></span>
<span id="cb24-7"><a href="principal-component-analysis.html#cb24-7" aria-hidden="true" tabindex="-1"></a>pr_out<span class="sc">$</span>rotation</span>
<span id="cb24-8"><a href="principal-component-analysis.html#cb24-8" aria-hidden="true" tabindex="-1"></a>pr_out<span class="sc">$</span>x</span></code></pre></div>
<pre><code>##                  PC1          PC2          PC3
##    [1,]  1.148895438  1.173926779  2.185256118
##    [2,]  1.425644619  0.255529758 -0.195387867
##    [3,]  0.152860360 -0.068905487  0.078912367
##    [4,] -0.045437970 -0.100876857  2.897950029
##    [5,]  0.364431409  1.935215075  1.349468506
##    [6,] -2.780342598  0.729202881 -0.942934140
##    [7,]  0.125644920  1.740198144 -3.178929249
##    [8,]  0.005195070 -1.903880943  2.553538281
##    [9,] -0.116434486  0.522302217 -0.756477935
##   [10,] -2.376539501  4.283292480  0.317634381
##   [11,]  2.825020022 -1.253550359 -1.136589969
##   [12,] -0.773725447 -0.319329367  1.237127299
##   [13,]  0.021505844 -0.160346518  0.844041403
##   [14,] -1.347306115 -0.268320252 -0.736566090
##   [15,] -0.118879768 -0.023099131 -0.308852245
##   [16,]  1.237871112 -0.982700484 -1.045208312
##   [17,] -3.447397878 -1.989569371 -2.137294376
##   [18,]  2.957636329 -1.118285315 -2.866737047
##   [19,] -0.714266456 -0.466844843  0.179151407
##   [20,]  1.136018756 -1.075474022 -0.862366290
##   [21,]  0.154130060 -0.185252405 -1.423442985
##   [22,] -0.209530089 -1.701347714 -1.153287317
##   [23,]  0.069196630  0.316929864 -0.764489848
##   [24,]  2.026062494  0.871738926  0.054305816
##   [25,]  1.489969267 -2.299073282 -1.524935081
##   [26,] -2.183451877 -0.847332202  3.046662772
##   [27,]  1.357695321 -0.946972015 -0.241907223
##   [28,] -0.925444762 -3.252742035  3.278782535
##   [29,]  1.321257182  0.243517498 -0.427330954
##   [30,]  1.877567154  0.109099643  1.383782520
##   [31,] -1.021611024  0.393296877  1.093556490
##   [32,] -3.557644161 -3.097643369 -0.335345812
##   [33,]  0.604885100 -0.444432961 -0.226312288
##                  PC4          PC5           PC6
##    [1,]  1.584845019  0.645296435  0.5571091340
##    [2,] -0.599546323 -1.963194137  0.2260236783
##    [3,] -0.487317290  0.848844473  0.5671740470
##    [4,] -1.146282311  1.270270660  0.7500548086
##    [5,] -0.789251858 -0.599909034 -0.2433839851
##    [6,]  0.400033080 -0.166987499 -0.4516515372
##    [7,]  0.212149264  0.791940996  0.7957215514
##    [8,] -1.012140814  1.457284585 -0.2522901852
##    [9,]  1.696135030 -0.319433517 -0.9171115662
##   [10,]  2.148101935  0.489314548 -0.3262908958
##   [11,] -0.738607635  0.478947645 -0.7754010244
##   [12,] -1.757308565 -0.577198319  0.2254035324
##   [13,]  0.387506063  0.915907539 -0.3851262056
##   [14,] -2.644603902  1.117869662  0.2965902683
##   [15,] -1.895168149  0.180952786 -0.8732477397
##   [16,]  0.378125899  0.457318270 -1.4168636537
##   [17,]  0.724921875  0.241614910  0.9139361313
##   [18,] -0.420213169  0.015232559  0.9449894415
##   [19,] -0.349291544  1.753307037  0.3149901441
##   [20,]  0.796001493  1.714170281 -0.7709985231
##   [21,] -2.078583560  1.255669666  1.2557028424
##   [22,] -0.004087954  1.647768954 -0.1733249653
##   [23,] -0.682241129  0.708934779 -0.5250975168
##   [24,]  2.083900435  0.710103862  0.6552614854
##   [25,]  1.707607478 -0.690327798  0.6166536633
##   [26,]  1.415490557  0.374850698 -1.2349181561
##   [27,] -0.962002542  0.790497919  0.5725115832
##   [28,]  2.270700377  0.544502935 -0.2516122943
##   [29,]  0.327858091 -0.439486656 -0.9724856034
##   [30,] -1.479235638  0.977831933  0.6379565870
##   [31,] -1.499660362  2.237215681  1.3542590651
##   [32,] -0.073074594 -1.103265261  0.7836912947
##   [33,] -0.011005900  0.193986796 -0.7361590670
##                  PC7           PC8           PC9
##    [1,] -0.221161385  0.3738754233  0.2768790416
##    [2,]  0.209716604 -0.2391778947 -0.4592770721
##    [3,] -0.877048795  0.4623309809 -0.5279331220
##    [4,]  0.067480575 -0.9528497687  0.2348714203
##    [5,]  0.740419138  1.1924170600 -0.0959103579
##    [6,] -0.726491201 -0.3982712851  1.0142961565
##    [7,] -0.580266992 -0.7414851425  0.3165873160
##    [8,] -0.377767167 -0.2620683636 -0.0134169984
##    [9,]  0.340150128  0.1013711929  0.7434349511
##   [10,]  0.399801497 -1.1347330721  0.3204888497
##   [11,] -0.149035897  0.4665579411  0.4610510205
##   [12,] -0.777243530 -0.0703626053  0.0462986596
##   [13,]  0.189616182 -0.5509039653 -0.7059248103
##   [14,] -1.635040579  0.3803417486 -0.5188781978
##   [15,]  0.664819503  0.7769097851  0.4371169733
##   [16,] -0.420965826 -1.2386642808  0.4621616789
##   [17,] -0.351275375 -0.8713092341 -0.7416785775
##   [18,] -1.069535795 -0.5074982938  0.1312136480
##   [19,]  0.389658376 -0.7759091878  0.3582590511
##   [20,] -1.568363660  0.4284357199 -0.7648044803
##   [21,] -0.256417115 -0.4886275595  0.2971645271
##   [22,]  0.102931169  0.1628107022  0.7358237302
##   [23,] -0.966361369  0.7478490361  0.6372008636
##   [24,] -0.659014261  0.3943153402  1.4471243309
##   [25,]  0.052415846  0.9550104423 -0.9496456973
##   [26,] -0.276965118  0.3831400064  0.5102967300
##   [27,] -0.807401600  0.4142432920 -0.4731282246
##   [28,] -0.037435685 -0.5257218637 -0.1348218909
##   [29,] -1.153061294 -0.2317630363  0.6944743901
##   [30,]  0.372410115  0.7718250244  0.7459385580
##   [31,] -0.984529003 -0.3503297917  0.0803693398
##   [32,]  1.142301728 -0.0219044542 -0.9847437203
##   [33,]  0.021414688 -1.3112228487  0.5392281158
##                 PC10         PC11          PC12
##    [1,]  0.571559575  1.619830512  0.6456520157
##    [2,] -0.673732752  0.382704267  0.0996730796
##    [3,]  0.202562041 -0.793319503 -0.1465877907
##    [4,] -1.065021027  0.426223776  0.2282872069
##    [5,]  0.260436408 -0.894492520  0.3884688540
##    [6,] -0.295605639 -0.579872671 -0.4128405871
##    [7,] -0.884633255 -0.179661850 -0.9593380332
##    [8,]  0.119557954 -0.222388739  1.1001650912
##    [9,]  0.512416886 -0.429579763 -0.1561104071
##   [10,] -0.977105181  0.769264551  0.3885552953
##   [11,] -1.117152609 -0.158006594  0.2825742479
##   [12,]  0.528675011 -0.129628634  0.4766147496
##   [13,]  0.034932688  0.749939731 -1.5393538821
##   [14,]  0.028966762 -0.617902636  0.6949158457
##   [15,] -0.332399694  0.635075766 -1.2094508764
##   [16,] -0.476604137 -0.104979074  0.3091691172
##   [17,] -0.294680364  0.788787053  0.5380027830
##   [18,] -0.845669055  0.681938607 -0.4234224732
##   [19,] -0.064841757 -0.682742539  0.3936244758
##   [20,] -0.103851709  0.422456374 -0.3894216168
##   [21,] -0.329658009  0.021034117  0.8897086821
##   [22,] -0.033846190  0.137709060  0.0376462372
##   [23,]  0.465129571  0.108982391 -0.8622860998
##   [24,]  0.168673885  1.179627682 -0.8899545332
##   [25,] -0.298310107  1.117569840 -0.0765153243
##   [26,]  0.631590927  0.705081611 -0.8591727829
##   [27,] -0.129855687  0.235740816 -0.5590615064
##   [28,]  0.386438776 -0.170160605 -0.2813516737
##   [29,] -0.309210694  0.010894054  0.0074562973
##   [30,]  0.143097301 -0.124485002 -1.6441521915
##   [31,]  0.929319170 -0.115757148  0.2636860108
##   [32,]  0.002615431 -0.243527709  1.0044513876
##   [33,]  0.679623040 -1.169230373 -0.6876476327
##                  PC13          PC14          PC15
##    [1,] -0.7417831657 -0.6645447309 -0.1148661208
##    [2,]  0.3389151381  0.3042049181 -0.0265591243
##    [3,]  0.1258322346  0.3331687774  0.5451599132
##    [4,] -0.7596750859 -0.2860436674  0.5525443782
##    [5,] -0.4076525372  0.3432417443  0.1064157163
##    [6,] -0.0189181311 -0.0885710498 -0.3833083455
##    [7,] -0.7835743062  0.0499085636  0.2248527624
##    [8,]  0.2885563471  0.4270711887  0.3839604821
##    [9,]  0.3741189247 -1.3612672135 -0.0187348573
##   [10,] -0.3698908605  0.3509466786 -0.1240684522
##   [11,] -0.1438119256 -0.6621539992  0.3576779889
##   [12,]  0.0001725329  1.2067477486 -0.4293028496
##   [13,]  0.5566689668 -1.1151626594 -0.3048191550
##   [14,]  0.9883257198  0.6862368137 -0.4313338739
##   [15,] -0.5487046230  0.0550117340  0.2744619103
##   [16,]  1.1451112661  0.4776068151  0.7126923912
##   [17,]  0.9897914096 -0.0913361750  0.6104733321
##   [18,]  0.0194373835 -0.2022397349  0.1135327822
##   [19,] -0.1152065218  0.5525958221 -0.7731969378
##   [20,] -0.4371840953 -0.2657927403  0.0981686656
##   [21,] -0.1551740985  0.0031824648 -0.4665152029
##   [22,]  0.3819881414 -0.0468893115  0.6908412970
##   [23,] -0.3536959829 -0.0233323294 -0.9061580094
##   [24,]  0.4216602349 -0.4983881123  0.1193437824
##   [25,]  0.4662723968  0.4180658787  0.2707395548
##   [26,]  0.2886020663 -1.2350530614 -0.6914376357
##   [27,] -0.3831979578 -0.1033050119  0.1909710896
##   [28,]  0.0239158253 -0.2291218757 -0.2078674905
##   [29,] -0.1949837992  0.3152440549 -0.1340383186
##   [30,] -0.1915637777 -0.2963118273 -0.6226390030
##   [31,]  0.0287241480  0.2275684303  0.3721976178
##   [32,] -0.3954679065 -0.1345974952  0.3039809374
##   [33,] -0.3486721294  0.5704460794  0.0421505455
##                  PC16          PC17          PC18
##    [1,]  0.1890468406 -0.3799128832  0.1107458509
##    [2,]  0.1233748959 -0.0822692881 -0.7400019904
##    [3,] -0.5944155851 -0.5707149957 -0.0654923734
##    [4,]  0.2646798911 -0.3051725176  0.1312683172
##    [5,] -0.5190888482  0.1748132662 -0.4543736408
##    [6,] -0.0845155357 -0.0394925898  0.1710763414
##    [7,]  0.5956936692  0.2310958275  0.3477630245
##    [8,]  0.5244368889 -0.1179071772 -0.9740143031
##    [9,] -0.0653890944  0.1091466280  1.0731821236
##   [10,] -0.2751428797 -0.6581513110 -0.7387211938
##   [11,]  0.8813847400 -0.4800916400  0.0183456774
##   [12,]  0.2696951230 -0.0283051066 -0.3325323555
##   [13,]  0.4042884323 -1.3446953606  0.3656927037
##   [14,] -0.4334781967  0.6625665876 -0.0717381291
##   [15,] -0.1259504201 -0.2270854993  0.0608927330
##   [16,]  0.3335247327 -0.3965746588 -0.4345696000
##   [17,] -1.4365057651 -0.0586951631 -0.1746368955
##   [18,]  0.3776518705 -0.5785232653  0.0267997290
##   [19,] -0.3549763815 -0.0696932091 -0.4085198413
##   [20,] -0.1280933260  0.5268077515  0.6582152855
##   [21,] -0.3770663889  0.1420344855  0.5263793112
##   [22,] -1.0889651933  0.0051477960  0.2397742493
##   [23,] -0.2668605053 -0.3428816005  0.2450707672
##   [24,]  0.2342807402 -0.2941538914  0.1242044190
##   [25,]  0.1319738682 -0.0528148619  0.6546183947
##   [26,] -0.1526355765 -0.4267466515  0.2603949672
##   [27,]  0.3379331123  0.5398774234 -0.2768607476
##   [28,]  0.3565523409  0.5430688373  0.4434165735
##   [29,] -0.1307135196  0.4951139331 -0.4962140180
##   [30,]  0.2494671430 -0.2585038107  0.2765296438
##   [31,] -0.2317420606 -0.2816847526 -0.5366834248
##   [32,] -0.6361586428  0.0988427781 -0.4645011784
##   [33,]  0.3297581764  1.7387499423 -0.6557739717
##                  PC19          PC20          PC21
##    [1,]  0.3927909541  0.3411508525 -0.7713579496
##    [2,] -0.0112767999  0.0117473121  0.2572353652
##    [3,]  0.0243568529 -0.3862214253  0.1278878135
##    [4,] -0.3695977364 -0.4508729421  0.3555411831
##    [5,]  0.4520279899 -0.4353761240  0.0029874737
##    [6,]  0.3912301748 -0.0092640675  0.3530791363
##    [7,] -0.1108786053  0.4809279218  0.0617662577
##    [8,]  0.1548636827  0.5276403034  0.3481278419
##    [9,] -0.4886844926 -0.2426633681  0.6341009277
##   [10,]  0.0157655065  0.1512474327 -0.0652437725
##   [11,] -0.3038774049 -0.9069016517 -0.3650656690
##   [12,] -0.3121898909  0.6683435780 -0.1177685214
##   [13,]  0.0458683660 -0.2839335237 -0.2372379621
##   [14,] -0.2271252394 -0.1386848071  0.6154093904
##   [15,] -0.3801645902  0.2756403242  0.0790533056
##   [16,]  0.2264535246  0.8740495314  0.1857516892
##   [17,]  0.0975817224  0.3313216303 -0.0057433021
##   [18,] -0.9453481314  0.4043060561 -0.3704066529
##   [19,]  0.3182273729 -0.1252261896 -0.0514188008
##   [20,]  0.8475189494  0.2527060497  0.2034322010
##   [21,]  0.6321799198 -0.0051719373  0.4642251042
##   [22,]  0.4893782800  0.3630069786 -0.2201025967
##   [23,]  0.1675254146 -0.5941305333  0.0592778026
##   [24,] -0.1715010826 -0.1270240106  0.0359235792
##   [25,]  0.2627860017  0.0229807731  0.0243959557
##   [26,]  0.8876121793 -0.1200467309 -0.4548569973
##   [27,]  0.3839674271 -0.3437535100  0.2176813470
##   [28,]  0.2156418009 -0.4419835160 -0.2519411451
##   [29,] -0.3004274536 -0.0171545817  0.8184054256
##   [30,] -0.3687733957 -0.6399137506  0.3743690639
##   [31,]  0.4093977017 -0.3754839320  0.4544614312
##   [32,]  0.0144444909 -0.4863166926 -0.1709019796
##   [33,] -0.4900829961  0.2136585110  0.2754626298
##                  PC22          PC23          PC24
##    [1,] -0.1580567205  0.1967103548 -0.4257914982
##    [2,]  0.1270179571  0.1050604007 -0.3548523280
##    [3,]  0.0753522805 -0.2264928713 -0.0441928597
##    [4,] -0.3659259526  0.2919355992 -0.1646153785
##    [5,] -0.1323181647 -0.6298897217  0.4171911714
##    [6,] -0.7577812961  0.0768335191  0.1464187970
##    [7,] -0.1760990375  0.0822276172 -0.1402501271
##    [8,]  0.3479002462  0.2859116951 -0.0069117520
##    [9,]  0.4874857588  0.2107712833  0.4760309628
##   [10,]  0.4546187920  0.4781697666  0.0761284861
##   [11,] -0.0591424422 -0.1058793024 -0.2485814704
##   [12,] -0.4168928518  0.5681247456  0.3148885828
##   [13,] -0.4960751578  0.0291426578 -0.0731812197
##   [14,]  0.5811643157  0.0788607558 -0.1100064028
##   [15,] -0.2427943098  0.0911920473  0.2010945691
##   [16,] -0.0565307007 -0.3607803103 -0.6377060465
##   [17,] -0.0446892078  0.0177167229  0.3133449394
##   [18,] -0.1490897964 -0.2304716468 -0.2603181615
##   [19,]  0.4114077385 -0.0061501063 -0.1766896834
##   [20,]  0.4376799184  0.2592889881 -0.5090565037
##   [21,] -0.9622324245  0.0462081537  0.1159403368
##   [22,] -0.0400545993  0.4569203124  0.4569669073
##   [23,] -0.2224466233 -0.2174901079 -0.4519279089
##   [24,] -0.1068995432 -0.0028579077 -0.2487960131
##   [25,]  0.3937590725 -0.0124264614  0.0323722169
##   [26,] -0.5149108371  0.3202022000 -0.4736351903
##   [27,] -0.0252545223  0.3056826117 -0.7479341371
##   [28,] -0.4623907315  0.1269754544  0.1668465027
##   [29,] -0.0370711873  0.3761351491  0.0256321774
##   [30,] -0.1314424885  0.0931717057  0.3716983868
##   [31,] -0.0511719986 -0.5598303895  0.4781470964
##   [32,] -0.2655083376  0.2504527726 -0.0210945178
##   [33,]  0.1568517824  0.0935969173  0.3504955264
##                  PC25          PC26          PC27
##    [1,]  3.680196e-02 -1.672027e-01 -0.1813319680
##    [2,] -9.280389e-02  1.779322e-01  0.0257560212
##    [3,]  1.389519e-01  3.124201e-01 -0.2954378028
##    [4,]  7.938922e-02  7.169118e-02  0.1827628708
##    [5,]  1.760417e-01  2.692769e-01  0.1938079321
##    [6,]  1.144365e-01  6.909644e-02  0.2062838047
##    [7,]  1.427940e-01 -1.402393e-01  0.3784661942
##    [8,]  4.509531e-01 -6.118315e-02  0.1642770976
##    [9,] -5.348739e-01  1.715461e-02 -0.0992832022
##   [10,] -2.847563e-01  6.635345e-02  0.2659665351
##   [11,]  3.578711e-01 -6.304728e-02 -0.1678797867
##   [12,] -5.390780e-01  2.244174e-01 -0.0270892409
##   [13,]  2.994624e-01 -5.680762e-02  0.0614096014
##   [14,]  4.917017e-01 -1.941495e-03 -0.2388761340
##   [15,]  1.093273e-01  2.927472e-01  0.3978965737
##   [16,]  5.426866e-01 -7.540170e-02 -0.0335463200
##   [17,] -8.789765e-02 -8.163026e-02  0.0322391901
##   [18,]  1.035540e-01  1.354580e-01 -0.6900807588
##   [19,]  1.221083e-01 -2.426528e-01 -0.2859831361
##   [20,]  5.592486e-02  7.460752e-01  0.0313137062
##   [21,] -2.208759e-01 -3.495728e-01 -0.3150550225
##   [22,]  2.536486e-01  2.685425e-01  0.0725862586
##   [23,]  6.980053e-02  5.401792e-02 -0.0555292424
##   [24,] -1.804098e-01 -1.532015e-01 -0.6759156074
##   [25,] -4.515246e-01 -2.926559e-01 -0.0258517539
##   [26,]  1.807121e-01 -1.920932e-02 -0.2921152131
##   [27,] -2.353161e-01 -9.692356e-03  0.0895658483
##   [28,] -2.466166e-01 -1.505409e-01  0.3218362349
##   [29,] -5.768275e-01  3.798741e-01 -0.3136274057
##   [30,]  1.059769e-01 -8.481390e-02  0.1143186324
##   [31,] -3.791168e-01  7.272843e-02 -0.5954162201
##   [32,] -1.518646e-01  5.094483e-02 -0.1281059303
##   [33,]  1.780386e-01  3.389996e-01  0.1999304253
##                  PC28          PC29          PC30
##    [1,]  0.2548771787  0.3100922555  2.587637e-01
##    [2,]  0.3730614512  0.0120374815 -1.355615e-01
##    [3,] -0.6863209078  0.1867842263 -6.056479e-02
##    [4,] -0.1228929122 -0.2646817144  4.059342e-01
##    [5,] -0.2419320953 -0.1379046680 -5.563579e-02
##    [6,]  0.1755242876 -0.1674839331 -2.318568e-01
##    [7,] -0.0467379104 -0.0571445351  1.644903e-01
##    [8,] -0.0593167415  0.1738784786  8.967702e-02
##    [9,]  0.2763111457 -0.1189198260  1.792232e-03
##   [10,] -0.1598809026  0.0256184517 -3.228567e-01
##   [11,] -0.2515455702 -0.0611093709  1.382700e-01
##   [12,]  0.1489792155  0.0387030766  7.072887e-02
##   [13,] -0.5180088554  0.0127691521 -2.221126e-01
##   [14,] -0.0994598197 -0.0463037559  4.658438e-02
##   [15,]  0.0426418345  0.0030460460  1.948094e-01
##   [16,]  0.0312973879  0.1053645848  1.014039e-01
##   [17,]  0.1523070570 -0.1921021532  2.290671e-01
##   [18,]  0.2020030686 -0.2035653969  4.235712e-02
##   [19,]  0.7954248643  0.0573353260  2.203355e-01
##   [20,] -0.1943728154  0.3467652325  1.110781e-01
##   [21,] -0.3224408680 -0.4740071036 -2.446553e-01
##   [22,] -0.1103742026 -0.0959723955 -6.044969e-02
##   [23,]  0.0067042587 -0.0076537072  1.535240e-01
##   [24,] -0.3736318711 -0.0888220848  1.844189e-01
##   [25,] -0.3235729991 -0.0171841052 -9.689287e-02
##   [26,] -0.4249733717 -0.1312441993 -4.839775e-02
##   [27,]  0.4611838660  0.0723088745 -1.758151e-02
##   [28,]  0.0009574717  0.1924123627  2.449313e-01
##   [29,] -0.0694220220 -0.0922307264  9.811576e-02
##   [30,] -0.2567751687  0.1415090593  7.666585e-02
##   [31,] -0.4864522619 -0.1130643914  2.647754e-01
##   [32,]  0.3492994399 -0.2230922770  4.245596e-01
##   [33,]  0.1115873477  0.0560533085 -2.713261e-01
##  [ reached getOption(&quot;max.print&quot;) -- omitted 967 rows ]</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="principal-component-analysis.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Now looking at rotation</span></span>
<span id="cb26-2"><a href="principal-component-analysis.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="principal-component-analysis.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(observ_x, <span class="dv">1</span> ) <span class="sc">%*%</span> pr_out<span class="sc">$</span>rotation[,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>##          [,1]
## [1,] 1.058387</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="principal-component-analysis.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#k is which column are we going to examine</span></span>
<span id="cb28-2"><a href="principal-component-analysis.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="principal-component-analysis.html#cb28-3" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb28-4"><a href="principal-component-analysis.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>rotation[, j])</span>
<span id="cb28-5"><a href="principal-component-analysis.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="principal-component-analysis.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">abs</span>(pr_out<span class="sc">$</span>rotation[, j]) <span class="sc">&gt;</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## [1]  1 14 15 23 26 27</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="principal-component-analysis.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what is the truth we should be comparing to?</span></span>
<span id="cb31-2"><a href="principal-component-analysis.html#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="principal-component-analysis.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="principal-component-analysis.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#What is rotation. Matrix (30 x 30 in this case)</span></span>
<span id="cb31-5"><a href="principal-component-analysis.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pr_out<span class="sc">$</span>rotation)</span></code></pre></div>
<pre><code>## [1] 30 30</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="principal-component-analysis.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#it is actually p x p rather than p x k to give you more columns</span></span>
<span id="cb33-2"><a href="principal-component-analysis.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="principal-component-analysis.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pr_out<span class="sc">$</span>rotation[,k])</span></code></pre></div>
<pre><code>## [1] -0.09620215 -0.00285525  0.02893618 -0.23005316
## [5]  0.15335164  0.16434759</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="principal-component-analysis.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#kth eigenvector which correspods with the kth largest value (most significant) value</span></span>
<span id="cb35-2"><a href="principal-component-analysis.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="principal-component-analysis.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="principal-component-analysis.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#this will always be 1. Property of rotation matrix</span></span>
<span id="cb35-5"><a href="principal-component-analysis.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(pr_out<span class="sc">$</span>rotation[,k]<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="a-caucus-race-and-a-long-tale.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="principal-component-analysis-applied.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/04-pca_sim.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/04-pca_sim.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
