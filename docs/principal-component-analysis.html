<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Principal Component Analysis | Data Mining</title>
  <meta name="description" content="Chapter 3 Principal Component Analysis | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Principal Component Analysis | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Principal Component Analysis | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="a-caucus-race-and-a-long-tale.html"/>
<link rel="next" href="principal-component-analysis-applied.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>2</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>3</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>3.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>3.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="3.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>3.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>4.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>4.1.1</b> Other example</a></li>
<li class="chapter" data-level="4.1.2" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#fishing-out-various-titles"><i class="fa fa-check"></i><b>4.1.2</b> Fishing out various titles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html"><i class="fa fa-check"></i><b>5</b> PCA on weather data example</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#different-noramlizations"><i class="fa fa-check"></i><b>5.1</b> Different noramlizations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#no-normalization"><i class="fa fa-check"></i><b>5.1.1</b> No normalization</a></li>
<li class="chapter" data-level="5.1.2" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.1.2</b> Centering and scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html"><i class="fa fa-check"></i><b>6</b> Tidyverse tools</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#select"><i class="fa fa-check"></i><b>6.1</b> Select</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#original-data-set"><i class="fa fa-check"></i><b>6.1.1</b> Original Data Set</a></li>
<li class="chapter" data-level="6.1.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#other-select-functions"><i class="fa fa-check"></i><b>6.1.2</b> Other select functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#filter"><i class="fa fa-check"></i><b>6.2</b> Filter</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#logical-tests-in-r"><i class="fa fa-check"></i><b>6.2.1</b> Logical Tests in R</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#mutate"><i class="fa fa-check"></i><b>6.3</b> Mutate</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-mutate-functions"><i class="fa fa-check"></i><b>6.3.1</b> Useful mutate functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#summarise-summarize"><i class="fa fa-check"></i><b>6.4</b> Summarise / Summarize</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-summary-functions"><i class="fa fa-check"></i><b>6.4.1</b> Useful summary functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="principal-component-analysis" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Principal Component Analysis</h1>
<p>Sparcity:</p>
<p>Inbalanced data:</p>
<div id="principle-component-analysis" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Principle Component Analysis</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="principal-component-analysis.html#cb1-1" aria-hidden="true" tabindex="-1"></a>hidden_p <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-2"><a href="principal-component-analysis.html#cb1-2" aria-hidden="true" tabindex="-1"></a>observ_p <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb1-3"><a href="principal-component-analysis.html#cb1-3" aria-hidden="true" tabindex="-1"></a>prob <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># runif(hidden_p)</span></span>
<span id="cb1-4"><a href="principal-component-analysis.html#cb1-4" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sample</span>(hidden_p,   <span class="co">#hidden to observed</span></span>
<span id="cb1-5"><a href="principal-component-analysis.html#cb1-5" aria-hidden="true" tabindex="-1"></a>              observ_p,</span>
<span id="cb1-6"><a href="principal-component-analysis.html#cb1-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">replace=</span><span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="principal-component-analysis.html#cb1-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">prob=</span>prob)</span>
<span id="cb1-8"><a href="principal-component-analysis.html#cb1-8" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sort</span>(h2o)</span>
<span id="cb1-9"><a href="principal-component-analysis.html#cb1-9" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb1-10"><a href="principal-component-analysis.html#cb1-10" aria-hidden="true" tabindex="-1"></a>hidden_z <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb1-11"><a href="principal-component-analysis.html#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">seq_len</span>(hidden_p),</span>
<span id="cb1-12"><a href="principal-component-analysis.html#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">rnorm</span>(sample_size))</span>
<span id="cb1-13"><a href="principal-component-analysis.html#cb1-13" aria-hidden="true" tabindex="-1"></a>corrs <span class="ot">&lt;-</span> <span class="fu">runif</span>(observ_p, <span class="fl">0.3</span>, <span class="fl">0.8</span>)</span>
<span id="cb1-14"><a href="principal-component-analysis.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="principal-component-analysis.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#create five groups of colinear stuff</span></span>
<span id="cb1-16"><a href="principal-component-analysis.html#cb1-16" aria-hidden="true" tabindex="-1"></a>observ_x <span class="ot">&lt;-</span> <span class="fu">mapply</span>(</span>
<span id="cb1-17"><a href="principal-component-analysis.html#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(i, corr) {</span>
<span id="cb1-18"><a href="principal-component-analysis.html#cb1-18" aria-hidden="true" tabindex="-1"></a>  hidden_z[, i] <span class="sc">*</span> corr <span class="sc">+</span> <span class="fu">rnorm</span>(sample_size) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> corr) <span class="sc">*</span><span class="dv">100</span></span>
<span id="cb1-19"><a href="principal-component-analysis.html#cb1-19" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb1-20"><a href="principal-component-analysis.html#cb1-20" aria-hidden="true" tabindex="-1"></a>  h2o, corrs)</span>
<span id="cb1-21"><a href="principal-component-analysis.html#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="principal-component-analysis.html#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#observ_x is what you often see, but there is still hidden stuff</span></span>
<span id="cb1-23"><a href="principal-component-analysis.html#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="principal-component-analysis.html#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="fu">cor</span>(observ_x))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="principal-component-analysis.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This looks weird to what we expect. It doesn&#39;t look like five groups</span></span>
<span id="cb2-2"><a href="principal-component-analysis.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#if we sort instead it works</span></span>
<span id="cb2-3"><a href="principal-component-analysis.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="principal-component-analysis.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="principal-component-analysis.html#cb2-5" aria-hidden="true" tabindex="-1"></a>h2o <span class="ot">&lt;-</span> <span class="fu">sample</span>(hidden_p,   <span class="co">#hidden to observed</span></span>
<span id="cb2-6"><a href="principal-component-analysis.html#cb2-6" aria-hidden="true" tabindex="-1"></a>              observ_p,</span>
<span id="cb2-7"><a href="principal-component-analysis.html#cb2-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">replace=</span><span class="cn">TRUE</span>,</span>
<span id="cb2-8"><a href="principal-component-analysis.html#cb2-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">prob=</span>prob)</span>
<span id="cb2-9"><a href="principal-component-analysis.html#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="principal-component-analysis.html#cb2-10" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb2-11"><a href="principal-component-analysis.html#cb2-11" aria-hidden="true" tabindex="-1"></a>hidden_z <span class="ot">&lt;-</span> <span class="fu">sapply</span>(</span>
<span id="cb2-12"><a href="principal-component-analysis.html#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">seq_len</span>(hidden_p),</span>
<span id="cb2-13"><a href="principal-component-analysis.html#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">rnorm</span>(sample_size))</span>
<span id="cb2-14"><a href="principal-component-analysis.html#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="principal-component-analysis.html#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#This effects how things are correlated!</span></span>
<span id="cb2-16"><a href="principal-component-analysis.html#cb2-16" aria-hidden="true" tabindex="-1"></a>corrs <span class="ot">&lt;-</span> <span class="fu">runif</span>(observ_p, <span class="fl">0.3</span>, <span class="fl">0.8</span>)</span>
<span id="cb2-17"><a href="principal-component-analysis.html#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="principal-component-analysis.html#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#create five groups of colinear stuff</span></span>
<span id="cb2-19"><a href="principal-component-analysis.html#cb2-19" aria-hidden="true" tabindex="-1"></a>observ_x <span class="ot">&lt;-</span> <span class="fu">mapply</span>(</span>
<span id="cb2-20"><a href="principal-component-analysis.html#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(i, corr) {</span>
<span id="cb2-21"><a href="principal-component-analysis.html#cb2-21" aria-hidden="true" tabindex="-1"></a>  hidden_z[, i] <span class="sc">*</span> corr <span class="sc">+</span> <span class="fu">rnorm</span>(sample_size) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> corr)</span>
<span id="cb2-22"><a href="principal-component-analysis.html#cb2-22" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb2-23"><a href="principal-component-analysis.html#cb2-23" aria-hidden="true" tabindex="-1"></a>  h2o, corrs)</span>
<span id="cb2-24"><a href="principal-component-analysis.html#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="principal-component-analysis.html#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#observ_x is what you often see, but there is still hidden stuff</span></span>
<span id="cb2-26"><a href="principal-component-analysis.html#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="principal-component-analysis.html#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span>(<span class="fu">cor</span>(observ_x))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-39-2.png" width="672" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="principal-component-analysis.html#cb3-1" aria-hidden="true" tabindex="-1"></a>beta <span class="ot">&lt;-</span> <span class="fu">runif</span>(hidden_p, <span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb3-2"><a href="principal-component-analysis.html#cb3-2" aria-hidden="true" tabindex="-1"></a>noise <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(sample_size, <span class="at">sd=</span><span class="dv">10</span>)</span>
<span id="cb3-3"><a href="principal-component-analysis.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#hard to measure hidden forces!</span></span>
<span id="cb3-4"><a href="principal-component-analysis.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#we can only measure x, but x is only correlated to hidden stuff</span></span>
<span id="cb3-5"><a href="principal-component-analysis.html#cb3-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> hidden_z <span class="sc">%*%</span> beta <span class="sc">+</span> noise</span>
<span id="cb3-6"><a href="principal-component-analysis.html#cb3-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(y, observ_x)</span>
<span id="cb3-7"><a href="principal-component-analysis.html#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="principal-component-analysis.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#y depends on the hidden stuff not x</span></span></code></pre></div>
<p>Maybe there is a hidden gene inside of you that makes you sick. We canâ€™t (yet) measure that hidden gene. But we can measure symptoms and things like your heart rate. This should be correlated.</p>
</div>
<div id="typical-machine-learning-approach" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Typical machine learning approach</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="principal-component-analysis.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#training data set, first 800 points (80 percent)</span></span>
<span id="cb4-2"><a href="principal-component-analysis.html#cb4-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">800</span></span>
<span id="cb4-3"><a href="principal-component-analysis.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="principal-component-analysis.html#cb4-4" aria-hidden="true" tabindex="-1"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., df, <span class="at">subset=</span>train)</span>
<span id="cb4-5"><a href="principal-component-analysis.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(ols<span class="sc">$</span>residual) <span class="co">#correct length</span></span></code></pre></div>
<pre><code>## [1] 800</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="principal-component-analysis.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predict on points we didn&#39;t use to train</span></span>
<span id="cb6-2"><a href="principal-component-analysis.html#cb6-2" aria-hidden="true" tabindex="-1"></a>ols_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(ols, df[<span class="sc">-</span>train,])</span>
<span id="cb6-3"><a href="principal-component-analysis.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="principal-component-analysis.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#error: differrence between measured values against predict. Mean of this squared MSE!</span></span>
<span id="cb6-5"><a href="principal-component-analysis.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((df<span class="sc">$</span>y[<span class="sc">-</span>train] <span class="sc">-</span> ols_pred)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 123.2481</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="principal-component-analysis.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#run ols </span></span>
<span id="cb8-2"><a href="principal-component-analysis.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="principal-component-analysis.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#PCA TIME</span></span>
<span id="cb8-4"><a href="principal-component-analysis.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#only input X, (feature matrix) into the PCA function</span></span>
<span id="cb8-5"><a href="principal-component-analysis.html#cb8-5" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(observ_x, <span class="at">scale=</span><span class="cn">FALSE</span>)</span>
<span id="cb8-6"><a href="principal-component-analysis.html#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="principal-component-analysis.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#scale is used because Xs might not be in the same unit, so mean = 0, sd = 1</span></span>
<span id="cb8-8"><a href="principal-component-analysis.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pr_out)</span></code></pre></div>
<pre><code>## [1] &quot;prcomp&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="principal-component-analysis.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#it has its own class</span></span>
<span id="cb10-2"><a href="principal-component-analysis.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pr_out)</span></code></pre></div>
<pre><code>## [1] &quot;sdev&quot;     &quot;rotation&quot; &quot;center&quot;   &quot;scale&quot;    &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="principal-component-analysis.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#squared value of sdev is eigenvalue</span></span>
<span id="cb12-2"><a href="principal-component-analysis.html#cb12-2" aria-hidden="true" tabindex="-1"></a>eigen_val <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span> </span>
<span id="cb12-3"><a href="principal-component-analysis.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="principal-component-analysis.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#cumulative sum as a fraction of total eigenvalues</span></span>
<span id="cb12-5"><a href="principal-component-analysis.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">cumsum</span>(eigen_val) <span class="sc">/</span> <span class="fu">sum</span>(eigen_val))</span>
<span id="cb12-6"><a href="principal-component-analysis.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span>.<span class="dv">9</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="principal-component-analysis.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#here after the 5th point, the slope tapers off! This is directly related to the hidden_p value at the beginning. It should help show you how many important hidden features there are. </span></span>
<span id="cb13-2"><a href="principal-component-analysis.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="principal-component-analysis.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#it is the percent of variabilitiy caputured by the first k components</span></span>
<span id="cb13-4"><a href="principal-component-analysis.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="principal-component-analysis.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#If you don&#39;t know what to choose, 90% variability is a good point </span></span>
<span id="cb13-6"><a href="principal-component-analysis.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="principal-component-analysis.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="principal-component-analysis.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>sdev)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-41-2.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="principal-component-analysis.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Very similar, but not as interpretable as percent of variability. </span></span>
<span id="cb14-2"><a href="principal-component-analysis.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="principal-component-analysis.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#These steps is how k is chosen.</span></span>
<span id="cb14-4"><a href="principal-component-analysis.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="principal-component-analysis.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#K is the dimension of W. Data came n x p. We need to shrink it to k. If you don&#39;t have</span></span>
<span id="cb14-6"><a href="principal-component-analysis.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#a clear cut, use 90%</span></span>
<span id="cb14-7"><a href="principal-component-analysis.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="principal-component-analysis.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#we don&#39;t want to keep all the variability because not all features provide useful</span></span>
<span id="cb14-9"><a href="principal-component-analysis.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#information. Some of them are so colinear, they just add noise. </span></span>
<span id="cb14-10"><a href="principal-component-analysis.html#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="principal-component-analysis.html#cb14-11" aria-hidden="true" tabindex="-1"></a>cutoff <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb14-12"><a href="principal-component-analysis.html#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="principal-component-analysis.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#now we are looking at x</span></span>
<span id="cb14-14"><a href="principal-component-analysis.html#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="principal-component-analysis.html#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#only pull out first k columns</span></span>
<span id="cb14-16"><a href="principal-component-analysis.html#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="principal-component-analysis.html#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pr_out<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>## [1] 1000   30</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="principal-component-analysis.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(observ_x)</span></code></pre></div>
<pre><code>## [1] 1000   30</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="principal-component-analysis.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#these will be the same, but we choose a cutoff. </span></span>
<span id="cb18-2"><a href="principal-component-analysis.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="principal-component-analysis.html#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="principal-component-analysis.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="principal-component-analysis.html#cb18-5" aria-hidden="true" tabindex="-1"></a>W <span class="ot">&lt;-</span> pr_out<span class="sc">$</span>x[, <span class="dv">1</span><span class="sc">:</span>cutoff]</span>
<span id="cb18-6"><a href="principal-component-analysis.html#cb18-6" aria-hidden="true" tabindex="-1"></a>df_w <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(y, W)</span>
<span id="cb18-7"><a href="principal-component-analysis.html#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="principal-component-analysis.html#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="principal-component-analysis.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#PCA doesn&#39;t have to be lm. It could be ridge or lasso too</span></span>
<span id="cb18-10"><a href="principal-component-analysis.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#should be like the ols from above</span></span>
<span id="cb18-11"><a href="principal-component-analysis.html#cb18-11" aria-hidden="true" tabindex="-1"></a>pca <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> ., df_w, <span class="at">subset=</span>train)</span>
<span id="cb18-12"><a href="principal-component-analysis.html#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#same prediction</span></span>
<span id="cb18-13"><a href="principal-component-analysis.html#cb18-13" aria-hidden="true" tabindex="-1"></a>pca_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(pca, df_w[<span class="sc">-</span>train,])</span>
<span id="cb18-14"><a href="principal-component-analysis.html#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="principal-component-analysis.html#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">#prediction error</span></span>
<span id="cb18-16"><a href="principal-component-analysis.html#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>((df_w<span class="sc">$</span>y[<span class="sc">-</span>train] <span class="sc">-</span> pca_pred)<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 124.6365</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="principal-component-analysis.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#that was the classic view of PCA </span></span></code></pre></div>
</div>
<div id="what-we-would-do-in-data-mining" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> What we would do in data mining</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="principal-component-analysis.html#cb21-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb21-2"><a href="principal-component-analysis.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>rotation[,k])</span>
<span id="cb21-3"><a href="principal-component-analysis.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="principal-component-analysis.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">abs</span>(pr_out<span class="sc">$</span>rotation[, k]) <span class="sc">&gt;</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## [1]  9 11 14 20 27 28</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="principal-component-analysis.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#what is the truth we should be comparing to?</span></span>
<span id="cb24-2"><a href="principal-component-analysis.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="principal-component-analysis.html#cb24-3" aria-hidden="true" tabindex="-1"></a>pr_out <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(observ_x)</span>
<span id="cb24-4"><a href="principal-component-analysis.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="principal-component-analysis.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="principal-component-analysis.html#cb24-6" aria-hidden="true" tabindex="-1"></a>test_x <span class="ot">&lt;-</span> <span class="fu">scale</span>(observ_x, <span class="at">scale =</span> <span class="cn">FALSE</span>) <span class="sc">%*%</span></span>
<span id="cb24-7"><a href="principal-component-analysis.html#cb24-7" aria-hidden="true" tabindex="-1"></a>pr_out<span class="sc">$</span>rotation</span>
<span id="cb24-8"><a href="principal-component-analysis.html#cb24-8" aria-hidden="true" tabindex="-1"></a>pr_out<span class="sc">$</span>x</span></code></pre></div>
<pre><code>##                  PC1          PC2           PC3           PC4           PC5           PC6
##    [1,] -2.627233767  0.233767845 -1.8676442301 -9.524782e-02  2.3503819094  0.5730812431
##    [2,] -0.747336961 -0.715937757 -0.4222118762 -1.014296e+00  1.9368452664  0.6386348158
##    [3,]  0.819868819  0.295631711  0.6620705826 -4.206339e-01 -0.4400664906  0.7254434814
##    [4,] -1.623008040 -0.174590139  2.7113726439  1.081238e-02  1.4388095846  0.1042611312
##    [5,]  1.935826396  0.443120556 -2.9715487196 -1.050621e+00 -0.6041807263 -0.6246760043
##    [6,]  1.306608797  0.480979016 -0.8171256339  1.554236e+00 -2.3145017944 -0.1846473152
##    [7,] -2.418414171  0.087051178  1.4965280528 -2.676229e+00 -0.0327665659  1.0305569318
##    [8,] -2.975659434 -3.186770252  1.1197749210  3.098054e-01  1.0119561494  0.3085410070
##    [9,]  2.285796513 -1.295068231  1.2422760224 -4.692978e+00 -0.4023533316 -1.0390831950
##   [10,] -1.846277193 -3.350195961 -0.2734457327  1.081279e+00  1.9962675635  0.1983633921
##   [11,] -2.633159528 -0.743026761  0.1507416090 -2.530363e+00  0.1533047110 -0.8579184097
##   [12,] -0.783430160  0.340582598  1.9852978979 -5.944006e-01  0.5028364753  1.0696322718
##   [13,]  2.671862961 -1.556178787 -2.0088141148  5.895387e-01  0.1357853964 -0.1113669382
##   [14,] -1.300792809  0.232561300 -1.9696972516  3.453367e+00 -2.5856857424  1.3634681793
##   [15,]  0.927476254 -0.026489476 -0.3438588915  6.104115e-01 -0.3875292248  0.2696680657
##   [16,] -1.715765415  1.646644233 -1.4894998123  2.191617e+00  0.2280162566 -1.0823484427
##   [17,] -1.092473264 -1.799252845 -2.5618024069 -2.947136e+00 -0.4981461403  0.2672213856
##   [18,] -0.079104099  0.926360433  2.2383513993 -7.777977e-01 -0.8894301131 -0.9212650167
##   [19,] -1.058535901  1.875660570 -0.9280590660  2.463338e+00 -0.0093417081 -0.3058399347
##   [20,]  0.249626689  0.810179657 -1.0296009470 -1.527731e+00 -1.2796881491 -0.6443242787
##   [21,]  2.936720119 -1.501349371 -0.9553476161 -1.087811e+00 -0.5307926422  0.4257326514
##   [22,]  0.660462192 -1.187339471 -1.4448483616  2.292014e+00  0.6735269803  0.2694342447
##   [23,]  0.271995171  2.482015988  1.3827789255  1.698338e+00 -2.6869908810 -0.8138615828
##   [24,]  0.905528962  2.046677702  2.1824450981 -1.087549e+00  1.4212102058  0.0470734688
##   [25,] -0.753385516 -1.233965157 -3.2494102014  1.494627e+00 -0.4787976351  0.5884200086
##   [26,] -2.489684584 -0.892895629  1.1529692526  2.467486e+00 -1.2281260950  0.1932702875
##   [27,] -1.436688134  0.209807660 -2.7630116057 -1.096429e+00  0.4784920332  0.0307182992
##   [28,] -3.119706260  1.910435246  0.5897360250  1.078181e+00 -0.2110640026  0.1337694942
##   [29,]  1.999969572 -0.836760445 -2.7726076943 -3.521431e+00  1.6031329573 -0.3270279524
##   [30,]  2.517944504  0.661158235 -0.3529745812 -1.151565e+00 -0.5492390480  0.2339136407
##   [31,] -0.850677905  0.155396808  1.1548022373 -1.345655e+00 -0.1090242909  1.4958705121
##   [32,] -0.536470779 -1.319742708  1.0083566391 -3.355757e-01  0.5524074488 -0.3755416497
##   [33,] -1.274838347 -0.655235185 -1.9078767209  3.709414e-01 -2.0247334565 -0.6158606955
##                   PC7          PC8           PC9          PC10          PC11          PC12
##    [1,] -0.0945862216  0.067809537  1.126032e+00 -0.2804767396  1.057824e-01 -0.3827615291
##    [2,]  0.3673223905 -0.376237911  2.182269e-01 -0.1637366004  8.284362e-02 -0.4689592115
##    [3,] -0.4636452086  0.220141978 -4.716177e-01 -1.0341626528  2.700841e-02 -0.4171852266
##    [4,]  0.5590168682 -0.025541045  3.694913e-01  0.6304153239 -8.902264e-02 -0.4898436326
##    [5,] -0.2014021418  0.039965875  1.089986e-01  0.3710732917 -1.472147e-01  0.3590579391
##    [6,]  0.3598696918  0.061058554 -4.253481e-01  0.3774527007 -7.205611e-01  0.0783853356
##    [7,]  0.0281923809  0.430834371  8.439031e-01  0.4527359441  7.694276e-01  1.5307542740
##    [8,] -0.4908167612 -0.636568347  3.902796e-01 -0.7997243014  5.721610e-01 -0.0024501905
##    [9,]  0.2279402923  0.242817701 -4.252772e-01 -0.0081241253  4.671890e-01  1.1911782027
##   [10,]  0.3566176481  0.044249052  6.082907e-01 -0.6761546619 -7.034719e-01  0.2623235743
##   [11,] -0.5197125070  0.160609060  1.421246e-01 -0.0681873477 -5.852902e-01  0.1945717875
##   [12,] -0.9058919240 -0.348630254  5.864969e-01 -0.3178462613 -6.840922e-01  0.0041204179
##   [13,]  0.0191061108 -0.239482949  1.484402e-01 -0.6472535204 -1.513670e-01 -0.0127841403
##   [14,] -1.0385547804  0.280655097  2.964358e-01  0.0143324108 -3.736755e-01 -0.1702455740
##   [15,] -0.7796247270  0.323674476  8.163835e-01 -0.1150773911  1.039944e+00  0.6680058753
##   [16,] -0.2331443253 -0.335401954 -8.894990e-01  0.0070936336 -4.889623e-01  1.0841328677
##   [17,] -0.0390860931  0.128918102  1.871708e-01  0.1091712173  6.785874e-01  0.6055175032
##   [18,] -0.2343034798 -0.512636770  5.271672e-01  0.5690669603  8.889447e-01  0.5074852670
##   [19,] -0.4470484638  0.780344159 -6.356729e-01  0.0023892521 -3.022386e-01 -0.5512566210
##   [20,]  0.6032557274 -0.291157456 -6.630226e-03 -0.0254694473  5.672953e-01  0.0278159401
##   [21,] -0.5169549149  0.220837987  2.161620e-01 -0.5442133040  9.303225e-01 -0.0192398757
##   [22,]  0.4163969971  0.959146985  5.971857e-01  0.1337733072  6.341715e-01  0.7326853889
##   [23,]  0.6377188662 -0.486230789  5.152756e-01  0.5536394452 -3.922922e-01  0.1238930259
##   [24,] -1.0092008835 -0.851079696 -6.022376e-01 -1.2026022729  3.799301e-01  0.4250776671
##   [25,] -0.0006932270 -0.074285340 -6.430792e-01 -0.6016060128  3.648568e-01 -0.5262450027
##   [26,]  0.8280820543  1.116364957 -8.764923e-01 -0.5262748957 -4.370248e-01  0.1229196804
##   [27,]  0.3442507784  0.219156601 -5.683022e-01 -0.7764277704 -5.606297e-01 -0.6514573910
##   [28,]  0.3383096952 -0.380004881  4.823741e-01  0.6703789451 -6.835691e-01  0.8222080456
##   [29,]  0.0155925811 -0.187027111  1.840776e-01  0.0698204694  5.749211e-01 -0.3650456114
##   [30,]  0.1495307925  0.144927637  7.810122e-01  0.4470377277 -6.820165e-02 -0.1590001542
##   [31,] -0.5697914456 -0.189141409  2.544140e-01  0.1532033784 -1.509714e+00 -0.0435865157
##   [32,]  0.7960665693  0.320301450  5.317758e-01 -0.0048124688  3.093856e-01 -0.0171592790
##   [33,]  0.2777697304  0.136437150  3.510428e-01  0.0995560292  1.642599e+00 -0.1461049078
##                  PC13         PC14          PC15         PC16          PC17          PC18
##    [1,] -1.971729e-01 -1.133604392 -0.1387813888 -0.597858059 -0.4307355438 -0.4530388862
##    [2,] -5.523353e-01  0.178681868  0.4225931372 -0.092114452 -0.1270677213 -0.4365344401
##    [3,] -1.358370e-01 -0.285951089 -0.3103866404  0.396603054 -0.1873560494 -0.6580058919
##    [4,] -1.089093e+00 -0.340701141  0.2235612739  0.693384634 -0.4228395617  1.2319774586
##    [5,]  9.416651e-01  0.230100353 -0.3214913057  0.433632304 -0.1410192067 -0.1609211275
##    [6,]  6.215479e-01 -0.917639503  0.3219103178  0.085455751  0.1606284553  0.8004444979
##    [7,]  7.290222e-01 -0.550815506  0.3863853618  0.222643002  0.3206204683 -0.3225479659
##    [8,]  5.155955e-01  0.259547815 -0.2816880066 -0.126658350 -0.5057502223 -0.2519866048
##    [9,]  3.299455e-01  0.647127832  0.7582166859  0.088816360  0.1514595639 -0.8647966532
##   [10,] -3.566493e-01 -0.155606144  0.1958720637  0.091021540  0.0477449128 -0.1017802516
##   [11,]  4.093008e-01  0.108998088  0.5432587149 -0.444395216 -0.4487056360  0.0596850178
##   [12,] -6.178532e-02 -0.353608738  0.4486146104 -0.427294870  1.1466275870  0.1689330830
##   [13,] -4.734807e-01 -0.690582172 -0.1356957357 -0.625971107  0.2856139280  0.3532425874
##   [14,]  7.032813e-02 -0.174970325 -0.1984561784 -0.014654143  0.1695370912  0.4489873741
##   [15,]  2.100304e-01  0.504546274 -0.2031954514 -0.634388638 -0.1475971823  0.8698622892
##   [16,]  3.434310e-01 -0.351291821 -0.1980781758 -0.048908938 -0.4534095443 -0.1841925880
##   [17,] -4.898998e-01 -0.132059178  0.5577914614 -0.399283473 -0.0340825105 -0.2843639903
##   [18,]  1.064560e+00  0.062935336 -1.0551831498 -0.468825901 -0.7675484252  0.4355225677
##   [19,]  2.890257e-01 -0.133992372 -0.4971690894 -0.199376637  0.0466824161 -0.0495979621
##   [20,]  2.674980e-01 -0.502398755  0.0626463245 -0.214950714 -0.3327295887  0.4646904830
##   [21,] -4.610287e-01  0.217961583 -0.2190337690  0.545880603  0.0330381196  0.6133824286
##   [22,]  6.475370e-01 -0.874924981  0.1430217566 -0.279798126  0.0793855384 -0.3537369845
##   [23,]  3.075128e-01  0.397561852  0.4193997703  0.629154137  0.2703133280  0.0450691271
##   [24,]  2.871425e-01 -0.662093526 -0.5114556241  0.007613242  0.0236270481  0.4127581690
##   [25,]  3.529644e-02  0.006591373 -0.0889884397  0.008270143 -0.2347489856  0.3212496132
##   [26,]  8.467657e-01 -0.277260034  0.0682693837 -0.564608960  0.5362776464  0.7456982641
##   [27,] -6.571747e-01 -0.833148826  0.0885582967  0.331195582 -0.2257442735 -0.3509276477
##   [28,]  3.681173e-01  0.742784421  0.2783739755  0.133104029 -0.1052545369  0.0738894867
##   [29,] -1.808704e-01  0.215205560 -0.2907770644  0.114603917  0.2620452209 -0.4989080992
##   [30,]  3.706037e-01 -0.373158189 -0.7499868470 -0.027131573  0.2892194166 -0.2460442526
##   [31,] -1.117669e+00 -0.220384650 -0.5575779251  0.337959310 -0.7183782065  0.3412314403
##   [32,]  1.122876e-01 -0.729014601 -0.0364562297 -0.030681922 -0.4594110588 -0.0353757587
##   [33,] -2.880914e-01 -0.535946920  0.5069222102 -0.539820504 -0.1984189701  0.6694070016
##                  PC19         PC20          PC21          PC22          PC23          PC24
##    [1,]  0.2129486860 -0.177867510 -2.778785e-01 -2.969255e-01 -3.468633e-01  0.1819086763
##    [2,] -0.5706807399 -0.009039301 -2.731015e-01 -4.517471e-01  8.851284e-02 -0.1833657801
##    [3,] -0.1579741062 -0.447399829 -8.734609e-02  5.192895e-01  1.240219e-01 -0.2431495361
##    [4,] -0.1689785892  0.366523704  6.281733e-02 -2.885342e-01 -1.366643e-01  0.2765699197
##    [5,] -0.0948559931  0.078388132  6.293470e-01 -2.745438e-01  5.342694e-02 -0.3431634977
##    [6,] -0.3960795753 -0.497002018  1.863304e-01  3.022092e-01  7.297884e-02 -0.0746478202
##    [7,]  0.5856450415 -0.202958557  1.013128e+00  2.802324e-01  7.135591e-02  0.0584653520
##    [8,] -0.2007883301  0.266012464 -1.374277e-01  4.415232e-02 -3.666079e-01  0.2790990954
##    [9,]  0.3131623397  0.078656783 -1.664406e-01 -1.112092e-01  2.190133e-01 -0.1262178681
##   [10,]  0.1007026000 -0.163373569  1.817827e-02 -1.142638e-02 -8.435088e-02  0.1272443399
##   [11,] -0.3193486594 -0.071095879  3.066906e-02 -1.213448e-01 -2.440558e-01  0.2064237466
##   [12,] -0.6555222791 -0.362323433  3.037587e-03 -4.518411e-01  6.879534e-02  0.5000435337
##   [13,] -0.2045969807  0.063144302 -5.120888e-01 -3.335473e-01 -1.306888e-01  0.2758941807
##   [14,]  0.5272813452  0.286385784  2.869250e-01 -1.809313e-01  3.474321e-01  0.1542252290
##   [15,] -0.0959424703 -0.459682383  5.597336e-01 -3.382807e-01  2.269803e-01 -0.1382489633
##   [16,] -0.3611606618  0.557543641  4.603610e-01  3.027711e-01 -3.012950e-02 -0.5030360508
##   [17,]  0.1445594352  0.182670184  1.795967e-01 -6.633523e-02  2.942207e-01 -0.4415133543
##   [18,] -0.2401775304 -0.425465152  2.811814e-01 -9.409038e-02 -3.838564e-03  0.2043125082
##   [19,]  0.4738636602 -0.089832441  1.476505e-01  2.110673e-01 -6.899870e-01 -0.4050517667
##   [20,] -0.0552814460 -0.439445369  1.324095e-02  1.562598e-02 -1.210825e-01 -0.2726444699
##   [21,] -0.1698494311 -0.701815141  7.064265e-01 -6.015050e-03  1.047511e-01  0.1344357373
##   [22,]  0.3678398234 -0.332634718  4.598825e-02 -9.488553e-04  1.408392e-02  0.4677178408
##   [23,] -0.6599068142  1.049265788 -2.036445e-01  1.862245e-01  2.379904e-01 -0.1355721211
##   [24,] -0.0001768498  0.566202511  7.235951e-01  2.986492e-01  2.215121e-01  0.4490456208
##   [25,] -0.3920086420  0.525005427  4.555730e-01 -4.520522e-01 -1.199010e-01 -0.4626612072
##   [26,]  0.2292027195 -0.176250895 -1.990712e-01 -6.075179e-01  6.572235e-01  0.2555316075
##   [27,]  0.1073905246 -0.471792149 -3.578465e-01 -5.582763e-01  3.882554e-02 -0.4438608705
##   [28,] -0.3460504221  0.142957190 -1.946871e-01 -1.359807e-02  1.959635e-01  0.1894497752
##   [29,] -0.6904765010  0.699805107  4.758093e-02 -5.336103e-01  1.175395e-01 -0.1352871606
##   [30,] -0.2887420018  0.752736324  8.324959e-01 -9.078305e-02  6.212408e-02 -0.0496077539
##   [31,]  0.5668623313  0.298743114  4.125592e-04  7.258967e-03  6.849191e-02 -0.3243378257
##   [32,]  1.0467708863  0.191056682  2.778628e-01 -3.072706e-02 -4.227199e-01  0.1218413423
##   [33,] -0.3673597011  0.195895760 -7.609970e-02 -8.246425e-02  1.283922e-01 -0.0478135980
##                  PC25          PC26          PC27          PC28         PC29          PC30
##    [1,] -0.5739930637 -5.548927e-02 -0.0248326628 -0.0943113865 -0.044658096  0.2980090857
##    [2,] -0.0964578323  3.057623e-01 -0.1648675041  0.1028171248 -0.040988688 -0.0153864066
##    [3,]  0.2479776026 -4.587855e-02  0.1076662398  0.0494826249 -0.223056204 -0.0442047598
##    [4,] -0.0990016111 -2.314886e-01  0.3074346429  0.1622048931 -0.369830319 -0.0303017773
##    [5,] -0.4105007788  1.295538e-02  0.4697555597 -0.7161732438 -0.120180810  0.4472188851
##    [6,]  0.0746169766  4.257695e-01 -0.1282495598 -0.0645198587 -0.018085771  0.2280491285
##    [7,]  0.1640757581  1.193321e-01 -0.7674415765 -0.4035886672  0.046367282  0.0631219977
##    [8,]  0.0126779222  2.346868e-01  0.2615542458  0.0667148366  0.329298304  0.0304831448
##    [9,] -0.1153718369  2.694831e-02  0.1209995426  0.0249906716 -0.357251691  0.0094386558
##   [10,]  0.2217519337  9.616175e-02  0.2262584603 -0.1211739032 -0.308461990 -0.1960435958
##   [11,]  0.0552331834  1.261838e-01  0.2061528935  0.0428141972 -0.210960769  0.2486498931
##   [12,] -0.1098776074  2.609114e-01  0.6507731366 -0.3579009454 -0.116292826 -0.5557369176
##   [13,] -0.2103202850  1.107016e-01  0.2235545428  0.1489743134 -0.060079433 -0.1505079182
##   [14,]  0.5352285870  3.998957e-01  0.5131747750 -0.0497364605 -0.071056445  0.1191702394
##   [15,]  0.0799861539 -2.252760e-01  0.1593179576 -0.1126707063 -0.026381184 -0.1499165502
##   [16,]  0.3967822340 -4.032676e-01  0.0119990045  0.2137185590 -0.157718241 -0.4039485166
##   [17,] -0.1696185589 -2.278215e-01  0.4277621782 -0.1091753994 -0.273074594  0.1259944343
##   [18,]  0.0220139825 -3.996640e-02  0.1487593937  0.0822572352  0.240579620  0.1367456127
##   [19,] -0.1169963928  7.562498e-01  0.0815690927  0.2159371256  0.156692812  0.0432607692
##   [20,]  0.0934245446  2.844885e-01 -0.0999337221 -0.1622528279  0.327988364 -0.0728302106
##   [21,]  0.3227765537  1.253857e-01  0.1539746624  0.3021024609  0.285939634 -0.2806647233
##   [22,]  0.0975072104 -5.557022e-01  0.1580989157  0.3699741018  0.222241463  0.1733701520
##   [23,] -0.6962564850 -7.231244e-02 -0.1091749667  0.1533896464  0.136023876  0.0420419962
##   [24,] -0.4714532048  7.688123e-02  0.0642431406 -0.0512699965 -0.070858359  0.1961171464
##   [25,] -0.0866225430 -4.925765e-02 -0.3216417035  0.0005605170 -0.024496985  0.0306728701
##   [26,]  0.3647370356  9.507866e-02  0.0038575111 -0.2976795554  0.013380014  0.4138941186
##   [27,]  0.5586347263  2.927762e-01  0.2426611006 -0.0102932222 -0.156716630  0.4205668291
##   [28,] -0.0437968002  3.244423e-02 -0.0321749811 -0.4101945853  0.039305473 -0.1793750103
##   [29,] -0.2940911749 -6.838641e-02 -0.2816519431  0.3599542940 -0.341535496 -0.0072331904
##   [30,]  0.2207979050 -3.452616e-02 -0.0326646635  0.5510675322  0.381735129  0.1257172205
##   [31,]  0.2523897945  1.399296e-01 -0.0354855711 -0.1692951023 -0.334364992 -0.0194072225
##   [32,]  0.5255525821  1.385889e-01  0.0990193106  0.0827959591 -0.007795572  0.1705112333
##   [33,] -0.2396775205  2.818132e-01  0.1963084025 -0.0336251572  0.343950079  0.1989692798
##  [ reached getOption(&quot;max.print&quot;) -- omitted 967 rows ]</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="principal-component-analysis.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Now looking at rotation</span></span>
<span id="cb26-2"><a href="principal-component-analysis.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="principal-component-analysis.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(observ_x, <span class="dv">1</span> ) <span class="sc">%*%</span> pr_out<span class="sc">$</span>rotation[,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>##           [,1]
## [1,] -2.712938</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="principal-component-analysis.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#k is which column are we going to examine</span></span>
<span id="cb28-2"><a href="principal-component-analysis.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="principal-component-analysis.html#cb28-3" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb28-4"><a href="principal-component-analysis.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pr_out<span class="sc">$</span>rotation[, j])</span>
<span id="cb28-5"><a href="principal-component-analysis.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-42-2.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="principal-component-analysis.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">abs</span>(pr_out<span class="sc">$</span>rotation[, j]) <span class="sc">&gt;</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## [1]  7 10 12 18 19 29</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="principal-component-analysis.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what is the truth we should be comparing to?</span></span>
<span id="cb31-2"><a href="principal-component-analysis.html#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="principal-component-analysis.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="principal-component-analysis.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#What is rotation. Matrix (30 x 30 in this case)</span></span>
<span id="cb31-5"><a href="principal-component-analysis.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pr_out<span class="sc">$</span>rotation)</span></code></pre></div>
<pre><code>## [1] 30 30</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="principal-component-analysis.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#it is actually p x p rather than p x k to give you more columns</span></span>
<span id="cb33-2"><a href="principal-component-analysis.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="principal-component-analysis.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pr_out<span class="sc">$</span>rotation[,k])</span></code></pre></div>
<pre><code>## [1]  0.03710519  0.03787717 -0.02450794  0.03845557 -0.02317041 -0.02164749</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="principal-component-analysis.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#kth eigenvector which correspods with the kth largest value (most significant) value</span></span>
<span id="cb35-2"><a href="principal-component-analysis.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="principal-component-analysis.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="principal-component-analysis.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#this will always be 1. Property of rotation matrix</span></span>
<span id="cb35-5"><a href="principal-component-analysis.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(pr_out<span class="sc">$</span>rotation[,k]<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="a-caucus-race-and-a-long-tale.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="principal-component-analysis-applied.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/04-pca_sim.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/04-pca_sim.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
