<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Tidyverse tools | Data Mining</title>
  <meta name="description" content="Chapter 6 Tidyverse tools | Data Mining" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Tidyverse tools | Data Mining" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Tidyverse tools | Data Mining" />
  
  
  

<meta name="author" content="Noah Love" />


<meta name="date" content="2021-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pca-on-weather-data-example.html"/>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Brief Introduction</a></li>
<li class="chapter" data-level="2" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>2</b> A caucus-race and a long tale</a></li>
<li class="chapter" data-level="3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>3</b> Principal Component Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#principle-component-analysis"><i class="fa fa-check"></i><b>3.1</b> Principle Component Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#typical-machine-learning-approach"><i class="fa fa-check"></i><b>3.2</b> Typical machine learning approach</a></li>
<li class="chapter" data-level="3.3" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html#what-we-would-do-in-data-mining"><i class="fa fa-check"></i><b>3.3</b> What we would do in data mining</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html"><i class="fa fa-check"></i><b>4</b> Principal Component Analysis Applied!</a>
<ul>
<li class="chapter" data-level="4.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#citation-data"><i class="fa fa-check"></i><b>4.1</b> Citation data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#other-example"><i class="fa fa-check"></i><b>4.1.1</b> Other example</a></li>
<li class="chapter" data-level="4.1.2" data-path="principal-component-analysis-applied.html"><a href="principal-component-analysis-applied.html#fishing-out-various-titles"><i class="fa fa-check"></i><b>4.1.2</b> Fishing out various titles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html"><i class="fa fa-check"></i><b>5</b> PCA on weather data example</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#different-noramlizations"><i class="fa fa-check"></i><b>5.1</b> Different noramlizations</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#no-normalization"><i class="fa fa-check"></i><b>5.1.1</b> No normalization</a></li>
<li class="chapter" data-level="5.1.2" data-path="pca-on-weather-data-example.html"><a href="pca-on-weather-data-example.html#centering-and-scaling"><i class="fa fa-check"></i><b>5.1.2</b> Centering and scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html"><i class="fa fa-check"></i><b>6</b> Tidyverse tools</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#select"><i class="fa fa-check"></i><b>6.1</b> Select</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#original-data-set"><i class="fa fa-check"></i><b>6.1.1</b> Original Data Set</a></li>
<li class="chapter" data-level="6.1.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#other-select-functions"><i class="fa fa-check"></i><b>6.1.2</b> Other select functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#filter"><i class="fa fa-check"></i><b>6.2</b> Filter</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#logical-tests-in-r"><i class="fa fa-check"></i><b>6.2.1</b> Logical Tests in R</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#mutate"><i class="fa fa-check"></i><b>6.3</b> Mutate</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-mutate-functions"><i class="fa fa-check"></i><b>6.3.1</b> Useful mutate functions:</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#summarise-summarize"><i class="fa fa-check"></i><b>6.4</b> Summarise / Summarize</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tidyverse-tools.html"><a href="tidyverse-tools.html#useful-summary-functions"><i class="fa fa-check"></i><b>6.4.1</b> Useful summary functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Mining</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse-tools" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Tidyverse tools</h1>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="tidyverse-tools.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="select" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Select</h2>
<div id="original-data-set" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Original Data Set</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="tidyverse-tools.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(storms)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 13
##   name   year month   day  hour   lat  long status   category  wind pressure ts_diameter hu_diameter
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;ord&gt;    &lt;int&gt;    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 Amy    1975     6    27     0  27.5 -79   tropica… -1          25     1013          NA          NA
## 2 Amy    1975     6    27     6  28.5 -79   tropica… -1          25     1013          NA          NA
## 3 Amy    1975     6    27    12  29.5 -79   tropica… -1          25     1013          NA          NA
## 4 Amy    1975     6    27    18  30.5 -79   tropica… -1          25     1013          NA          NA
## 5 Amy    1975     6    28     0  31.5 -78.8 tropica… -1          25     1012          NA          NA
## 6 Amy    1975     6    28     6  32.4 -78.7 tropica… -1          25     1012          NA          NA</code></pre>
<p>You can use (data source, columns)</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tidyverse-tools.html#cb89-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(storms, name, pressure)</span></code></pre></div>
<pre><code>## # A tibble: 10,010 x 2
##    name  pressure
##    &lt;chr&gt;    &lt;int&gt;
##  1 Amy       1013
##  2 Amy       1013
##  3 Amy       1013
##  4 Amy       1013
##  5 Amy       1012
##  6 Amy       1012
##  7 Amy       1011
##  8 Amy       1006
##  9 Amy       1004
## 10 Amy       1002
## # … with 10,000 more rows</code></pre>
<p>We can also do (data source, -columns) to choose all but that column, i.e.:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tidyverse-tools.html#cb91-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(storms, <span class="sc">-</span>name)</span></code></pre></div>
<pre><code>## # A tibble: 10,010 x 12
##     year month   day  hour   lat  long status        category  wind pressure ts_diameter hu_diameter
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;ord&gt;    &lt;int&gt;    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1  1975     6    27     0  27.5 -79   tropical dep… -1          25     1013          NA          NA
##  2  1975     6    27     6  28.5 -79   tropical dep… -1          25     1013          NA          NA
##  3  1975     6    27    12  29.5 -79   tropical dep… -1          25     1013          NA          NA
##  4  1975     6    27    18  30.5 -79   tropical dep… -1          25     1013          NA          NA
##  5  1975     6    28     0  31.5 -78.8 tropical dep… -1          25     1012          NA          NA
##  6  1975     6    28     6  32.4 -78.7 tropical dep… -1          25     1012          NA          NA
##  7  1975     6    28    12  33.3 -78   tropical dep… -1          25     1011          NA          NA
##  8  1975     6    28    18  34   -77   tropical dep… -1          30     1006          NA          NA
##  9  1975     6    29     0  34.4 -75.8 tropical sto… 0           35     1004          NA          NA
## 10  1975     6    29     6  34   -74.8 tropical sto… 0           40     1002          NA          NA
## # … with 10,000 more rows</code></pre>
</div>
<div id="other-select-functions" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Other select functions:</h3>
<table>
<caption>Other useful selection function</caption>
<colgroup>
<col width="25%" />
<col width="74%" />
</colgroup>
<thead>
<tr class="header">
<th>Function call</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>-</td>
<td>select everything but</td>
</tr>
<tr class="even">
<td>:</td>
<td>select range</td>
</tr>
<tr class="odd">
<td>contains()</td>
<td>Select columns whose name contains a character string</td>
</tr>
<tr class="even">
<td>ends_with()</td>
<td>Select columns whose name ends with a string</td>
</tr>
<tr class="odd">
<td>everything()</td>
<td>Select every column</td>
</tr>
<tr class="even">
<td>matches()</td>
<td>Select columns who name matches a regular expression</td>
</tr>
<tr class="odd">
<td>num_range()</td>
<td>Select columns named x1,x2,x3…</td>
</tr>
<tr class="even">
<td>one_of()</td>
<td>Select columns whose names are in a group of names</td>
</tr>
<tr class="odd">
<td>starts_with()</td>
<td>Select columns whose name starts with a character string</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="filter" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Filter</h2>
<p>This will apply a test to every row in the data frame and return just the rows that pass the test. You can combine by putting a comma in the state. It acts as AND.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tidyverse-tools.html#cb93-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">filter</span>(storms, wind <span class="sc">&gt;=</span> <span class="dv">50</span>,</span>
<span id="cb93-2"><a href="tidyverse-tools.html#cb93-2" aria-hidden="true" tabindex="-1"></a>              name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;alberto&quot;</span>, <span class="st">&quot;Alex&quot;</span>, <span class="st">&quot;allison&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 35 x 13
##    name   year month   day  hour   lat  long status  category  wind pressure ts_diameter hu_diameter
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;ord&gt;    &lt;int&gt;    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1 Alex   2004     8     2    12  31.3 -79   tropic… 0           50      992        155.         0  
##  2 Alex   2004     8     2    18  31.8 -78.7 tropic… 0           50      993        144.         0  
##  3 Alex   2004     8     3     0  32.4 -78.2 tropic… 0           60      987        144.         0  
##  4 Alex   2004     8     3     6  33   -77.4 hurric… 1           70      983        150.        46.0
##  5 Alex   2004     8     3    12  34.2 -76.4 hurric… 2           85      974        150.        46.0
##  6 Alex   2004     8     3    18  35.3 -75.2 hurric… 2           85      972        190.        57.5
##  7 Alex   2004     8     4     0  36   -73.7 hurric… 1           80      974        178.        63.3
##  8 Alex   2004     8     4     6  36.8 -72.1 hurric… 1           80      973        224.        74.8
##  9 Alex   2004     8     4    12  37.3 -70.2 hurric… 2           85      973        224.        74.8
## 10 Alex   2004     8     4    18  37.8 -68.3 hurric… 2           95      965        259.        74.8
## # … with 25 more rows</code></pre>
<div id="logical-tests-in-r" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Logical Tests in R</h3>
<p>The columns on the right show Boolean operator, these combine 2 or more logical tests into a single one, so you get true or false. The columns on the left actually do logical operations.</p>
<table>
<caption>Logical tests in R</caption>
<colgroup>
<col width="19%" />
<col width="31%" />
<col width="24%" />
<col width="24%" />
</colgroup>
<thead>
<tr class="header">
<th>Logical Test</th>
<th>?Comparison</th>
<th>Boolean Operator</th>
<th>?base::Logic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td></td>
<td>&amp;</td>
<td>boolean and</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>Greater than</td>
<td>|</td>
<td>boolean or</td>
</tr>
<tr class="odd">
<td>==</td>
<td>Equal to</td>
<td>xor</td>
<td>exactly or</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>Less than or equal</td>
<td>!</td>
<td>not</td>
</tr>
<tr class="odd">
<td>&gt;=</td>
<td>Greater than or equal</td>
<td>any</td>
<td>any true</td>
</tr>
<tr class="even">
<td>%in%</td>
<td>Group membership</td>
<td>all</td>
<td>all true</td>
</tr>
<tr class="odd">
<td>!=</td>
<td>Not equal</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>is.na</td>
<td>is NA</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>!is.na</td>
<td>Is not NA</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="mutate" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Mutate</h2>
<p>The mutate function takes your data frame and it returns a copy of the data with, with additional variables that you derive from the variable set that exists in the data. So mutate is there for anything you can derive from the data you already have, and want to make a new column from it.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tidyverse-tools.html#cb95-1" aria-hidden="true" tabindex="-1"></a>storms <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="tidyverse-tools.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> pressure <span class="sc">/</span> wind) <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="tidyverse-tools.html#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, pressure, wind, ratio)</span></code></pre></div>
<pre><code>## # A tibble: 10,010 x 4
##    name  pressure  wind ratio
##    &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1 Amy       1013    25  40.5
##  2 Amy       1013    25  40.5
##  3 Amy       1013    25  40.5
##  4 Amy       1013    25  40.5
##  5 Amy       1012    25  40.5
##  6 Amy       1012    25  40.5
##  7 Amy       1011    25  40.4
##  8 Amy       1006    30  33.5
##  9 Amy       1004    35  28.7
## 10 Amy       1002    40  25.0
## # … with 10,000 more rows</code></pre>
<p>You can also make multiple columns at the same time, even using columns that are created at the same time, as long as those come before chronologically, i.e.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tidyverse-tools.html#cb97-1" aria-hidden="true" tabindex="-1"></a>storms <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="tidyverse-tools.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> pressure <span class="sc">/</span> wind, <span class="at">inverse =</span> ratio<span class="sc">^-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="tidyverse-tools.html#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, pressure, wind, ratio, inverse)</span></code></pre></div>
<pre><code>## # A tibble: 10,010 x 5
##    name  pressure  wind ratio inverse
##    &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 Amy       1013    25  40.5  0.0247
##  2 Amy       1013    25  40.5  0.0247
##  3 Amy       1013    25  40.5  0.0247
##  4 Amy       1013    25  40.5  0.0247
##  5 Amy       1012    25  40.5  0.0247
##  6 Amy       1012    25  40.5  0.0247
##  7 Amy       1011    25  40.4  0.0247
##  8 Amy       1006    30  33.5  0.0298
##  9 Amy       1004    35  28.7  0.0349
## 10 Amy       1002    40  25.0  0.0399
## # … with 10,000 more rows</code></pre>
<p>One thing to note: mutate doesn’t affect the original data frame. It simply returns a new temporary dataframe. If you want to save the columns you need to assign it to a new data frame (or overwrite the original)</p>
<div id="useful-mutate-functions" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Useful mutate functions:</h3>
<table>
<colgroup>
<col width="55%" />
<col width="44%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>pmin(), pmax()</td>
<td>Element wise min and max</td>
</tr>
<tr class="even">
<td>cummin(), cummax()</td>
<td>cumulative min and max</td>
</tr>
<tr class="odd">
<td>cumsum(), cumprod()</td>
<td>Cumulative sum and product</td>
</tr>
<tr class="even">
<td>between()</td>
<td>Are values between a and b?</td>
</tr>
<tr class="odd">
<td>cume_dist()</td>
<td>Cumulative distribution of values</td>
</tr>
<tr class="even">
<td>cumall(), cumany()</td>
<td>Cumulative all and any</td>
</tr>
<tr class="odd">
<td>cummean()</td>
<td>Cumulative mean</td>
</tr>
<tr class="even">
<td>lead(), lag()</td>
<td>Copy with values one position</td>
</tr>
<tr class="odd">
<td>ntile()</td>
<td>Bin vector into n buckets</td>
</tr>
<tr class="even">
<td>dense_rank(), min_rank(), percent_rank(), row_number()</td>
<td>Various ranking methods</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="summarise-summarize" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Summarise / Summarize</h2>
<p>Summarize allows us to take a data frame and calculate a summary statistic from it and get back a new data frame that is much smaller.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tidyverse-tools.html#cb99-1" aria-hidden="true" tabindex="-1"></a>storms <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="tidyverse-tools.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">median =</span> <span class="fu">median</span>(pressure), <span class="at">variance =</span> <span class="fu">var</span>(pressure), <span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   median variance     n
##    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
## 1    999     381. 10010</code></pre>
<p>Works very similar to mutate.</p>
<div id="useful-summary-functions" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Useful summary functions</h3>
<table style="width:99%;">
<caption>Useful summary functions, top 5 are specific to dplyr</caption>
<colgroup>
<col width="26%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>min(), max()</td>
<td>Minimum and maximum values</td>
</tr>
<tr class="even">
<td>mean()</td>
<td>Mean value</td>
</tr>
<tr class="odd">
<td>median()</td>
<td>Median Value</td>
</tr>
<tr class="even">
<td>sum()</td>
<td>Sum of values</td>
</tr>
<tr class="odd">
<td>var, sd()</td>
<td>Variance and standard deviation of a vector</td>
</tr>
<tr class="even">
<td>first()</td>
<td>First value in a vector</td>
</tr>
<tr class="odd">
<td>last()</td>
<td>Last value in a vector</td>
</tr>
<tr class="even">
<td>nth</td>
<td>Nth value in a vector</td>
</tr>
<tr class="odd">
<td>n()</td>
<td>The number of values in a vector</td>
</tr>
<tr class="even">
<td>n_distinct()</td>
<td>The number of distinct values in a vector</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pca-on-weather-data-example.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/noahlove/data-mining/edit/master/Tidyverse-Sheet.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/noahlove/data-mining/blob/master/Tidyverse-Sheet.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
